<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[JavaScriptä¸­å¯¹è±¡çš„æ‹·è´]]></title>
    <url>%2F2018%2F12%2F13%2FCopying-Objects-in-JavaScript%2F</url>
    <content type="text"><![CDATA[æµ…æ‹·è´åˆ©ç”¨forå¾ªçŽ¯éåŽ†åŽŸå§‹å¯¹è±¡å°†åŽŸå§‹å¯¹è±¡ä¸­çš„æ¯ä¸ªå±žæ€§æ‹·è´åˆ°ç›®æ ‡å¯¹è±¡ä¸Šï¼Œä½†æ˜¯å¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜ 12345678910111213141516171819202122function shallowCopy(sourceObj) &#123; let objCopy = &#123;&#125;; let key; for (key in sourceObj) &#123; if (sourceObj.hasOwnProperty(key)) &#123; objCopy[key] = sourceObj[key]; &#125; &#125; return objCopy;&#125;const sourceObj = &#123; a: 3, b: 5, c: &#123; x: 7, y: 9 &#125;&#125;console.log(shallowCopy(sourceObj)); ä½¿ç”¨Object.assign()æ–¹æ³•1234567let obj = &#123; a: 1, b: 2&#125;let objCopy = Object.assign(&#123;&#125;, obj);console.log(objCopy); ä½¿ç”¨ES6çš„æ‰©å±•è¿ç®—ç¬¦...123456let obj = &#123; one: 1, two: 2&#125;let newObj = &#123;...obj&#125;; æµ…æ‹·è´å­˜åœ¨çš„é—®é¢˜ æ‹·è´å¯¹è±¡çš„åŽŸåž‹é“¾ä¸ä¼šç»§æ‰¿åŽŸå§‹å¯¹è±¡çš„åŽŸåž‹é“¾ åŽŸå§‹å¯¹è±¡çš„å±žæ€§æè¿°ç¬¦(æ•°æ®å±žæ€§ï¼Œè®¿é—®å™¨å±žæ€§)ä¸ä¼šè¢«æ‹·è´ åªæ‹·è´äº†å¯æžšä¸¾çš„å±žæ€§ åŽŸå§‹å¯¹è±¡ä¸­å†…åµŒçš„å¯¹è±¡ä¸Žæ‹·è´åŽå¯¹è±¡ä¸­çš„å†…åµŒå¯¹è±¡å…±äº«å†…å­˜åœ°å€ æ·±æ‹·è´ä½¿ç”¨JSON.parse(JSON.stringify(object))å®ƒèƒ½æ­£ç¡®å¤„ç†çš„å¯¹è±¡åªæœ‰ Number, String, Boolean, Array æ‰å¹³å¯¹è±¡ï¼Œå³é‚£äº›èƒ½å¤Ÿè¢«JSONç›´æŽ¥è¡¨ç¤ºçš„æ•°æ®ç»“æž„ï¼Œæ¯”å¦‚Dateå¯¹è±¡å°±ä¸é€‚ç”¨æ­¤æ–¹æ³•ã€‚ 123456789101112let obj = &#123; a: 1, b: &#123; c: 2 &#125;&#125;let newObj = JSON.parse(JSON.stringify(obj));obj.b.c = 20;console.log(obj); // &#123;a: 1, b: &#123;c: 20&#125;&#125;console.log(newObj); // &#123;a: 1, b: &#123;c: 2&#125;&#125; ç¼ºç‚¹ï¼š æ— æ³•æ‹·è´ç”¨æˆ·å®šä¹‰çš„å¯¹è±¡æ–¹æ³•(å‡½æ•°)ï¼Œä½†æ˜¯Object.assign()æ–¹æ³•å¯ä»¥ JSON.parse(JSON.stringify(object))æ–¹æ³•æ— æ³•æ‹·è´çŽ¯å¯¹è±¡(çŽ¯å¯¹è±¡æŒ‡çš„æ˜¯å¯¹è±¡æœ¬èº«çš„å±žæ€§ä¹‹é—´ç›¸äº’å¼•ç”¨)ï¼Œä½†æ˜¯Object.assign()æ–¹æ³•å´å¯ä»¥æµ…æ‹·è´å¾ªçŽ¯å¼•ç”¨çš„å¯¹è±¡ ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¦‚Underscoreçš„_.clone()ï¼ŒjQueryçš„$.clone()æµ…æ‹·è´ / $.extend(true, {}, ...)å¯ä»¥å®žçŽ°æ·±å¤åˆ¶ï¼Œlodashçš„_.clone() / _.cloneDeep()ï¼Œå…¶ä¸­lodashçš„å…¼å®¹æ€§æ›´å¥½ä¸€äº› åˆ©ç”¨HTML5çš„history APIåˆ©ç”¨history.pushState()å’Œhistory.replaceState()ä¸¤ä¸ªæ–¹æ³•éƒ½ä¼šä¸ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°åˆ›å»ºä¸€ä¸ªç»“æž„åŒ–çš„å…‹éš†ï¼Œä¸è¿‡è¦æ³¨æ„çš„æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯åŒæ­¥çš„å¹¶ä¸”å¯¹æµè§ˆå™¨åŽ†å²è®°å½•çš„æ“ä½œæ€§èƒ½å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œæ‰€ä»¥é‡å¤è°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•å¯èƒ½ä¼šå¯¼è‡´æµè§ˆå™¨æ²¡æœ‰å“åº”ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ 1234567const structuredClone = obj =&gt; &#123; const oldState = history.state; history.replaceState(obj, null); const cloneObj = history.state; history.replaceState(oldState, null); return cloneObj;&#125; åˆ©ç”¨Notification APIå½“åˆ©ç”¨Notificationæž„é€ å‡½æ•°åˆ›å»ºé€šçŸ¥æ—¶ï¼Œæž„é€ å‡½æ•°ä¹Ÿä¼šä¸ºä¼ å…¥çš„æ•°æ®åˆ›å»ºä¸€ä¸ªç»“æž„åŒ–çš„å…‹éš† 12345const structuredClone = obj =&gt; &#123; const n = new Notification("", &#123;data: obj, slient: true&#125;); n.onshow = n.close.bind(n); return n.data;&#125; ä½¿ç”¨Node.JSNode.jsè‡ª8.0.0ç‰ˆæœ¬ä¹‹åŽæä¾›äº†ä¸€ä¸ªå…¼å®¹ç»“æž„åŒ–å…‹éš†çš„åºåˆ—åŒ–APIï¼Œä½†æ˜¯è¿™ä¸ªAPIè¿˜åœ¨å¼€å‘é˜¶æ®µï¼Œæ‰€ä»¥å…¼å®¹æ€§å¹¶ä¸æ˜¯å¾ˆå¥½ 1234const v8 = require('v8');const buf = v8.serialize(&#123;a: 'foo', b: new Date()&#125;);const cloned = v8.deserialize(buf);cloned.b.getMonth(); åŽŸç”Ÿæ–¹æ³•stackoverflowä¸ŠåŽŸç”ŸJavascriptå®žçŽ°çš„ä¸€ä¸ªç®€å•çš„å¯¹è±¡å…‹éš†å‡½æ•°ï¼š 123456789101112131415161718192021222324252627282930313233function clone(obj) &#123; var copy; // Handle the 3 simple types, and null or undefined if (null == obj || "object" != typeof obj) return obj; // Handle Date if (obj instanceof Date) &#123; copy = new Date(); copy.setTime(obj.getTime()); return copy; &#125; // Handle Array if (obj instanceof Array) &#123; copy = []; for (var i = 0, len = obj.length; i &lt; len; i++) &#123; copy[i] = clone(obj[i]); &#125; return copy; &#125; // Handle Object if (obj instanceof Object) &#123; copy = &#123;&#125;; for (var attr in obj) &#123; if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]); &#125; return copy; &#125; throw new Error("Unable to copy obj! Its type isn't supported.");&#125; æ€»ç»“æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«ï¼šæµ…æ‹·è´åªå¤åˆ¶ä¸€å±‚å¯¹è±¡çš„å±žæ€§ï¼Œè€Œæ·±æ‹·è´åˆ™é€’å½’å¤åˆ¶äº†æ‰€æœ‰å±‚çº§æ·±æ‹·è´å¿…é¡»ç”¨åˆ°é€’å½’ã€‚ä»Žå…¼å®¹æ€§æ–¹é¢è€ƒè™‘ï¼Œä½¿ç”¨lodashçš„cloneDeep()æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚ å‚è€ƒé“¾æŽ¥ï¼šCopying Objects in JavaScriptjavascriptä¸­æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«æ·±å…¥å‰–æž JavaScript çš„æ·±å¤åˆ¶COPYING OBJECTS IN JAVASCRIPT]]></content>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[BeautifulSoup4 find_allæœç´¢åŒ…å«æŒ‡å®šæ–‡æœ¬å†…å®¹çš„æ ‡ç­¾è¿”å›žç©ºlistçš„é—®é¢˜]]></title>
    <url>%2F2018%2F08%2F30%2FBeautifulSoup4%E6%90%9C%E7%B4%A2%E5%8C%85%E5%90%AB%E6%8C%87%E5%AE%9A%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9%E7%9A%84%E6%A0%87%E7%AD%BE%E8%BF%94%E5%9B%9E%E7%A9%BAlist%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘å¸®åŠ©å…¬å¸å…¶ä»–å›¢é˜Ÿç”¨pythonå†™äº†ä¸€ä¸ªçˆ¬è™«ï¼Œé‡åˆ°äº†ä¸å°‘é—®é¢˜ï¼Œå…¶ä¸­å°±æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ä½¿ç”¨BeautifulSoup4çš„find_allæœç´¢åŒ…å«æŒ‡å®šæ–‡æœ¬å†…å®¹æ—¶è¿”å›žçš„æ˜¯ç©ºçš„listï¼ŒæŸ¥çœ‹äº†å®˜æ–¹æ–‡æ¡£ä¹Ÿä¸Šgoogleæœç´¢äº†ä¸€äº›ç±»ä¼¼çš„é—®é¢˜ï¼Œå‘çŽ°æ˜¯å› ä¸ºåœ¨ä½¿ç”¨bs4çš„find_allç»“åˆæ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æŒ‡å®šæ–‡æœ¬çš„æ—¶å€™ï¼Œæœç´¢çš„æ˜¯bs4è¿”å›žå…ƒç´ ä¸­stringå±žæ€§ä¸­çš„ä¿¡æ¯ï¼Œè€Œä¸æ˜¯textå±žæ€§ã€‚å¹¶ä¸”å¦‚æžœæŸä¸ªå…ƒç´ ä¸­å¦‚æžœè¿˜åŒ…å«é™¤äº†æ–‡æœ¬ä¹‹å¤–çš„å­å…ƒç´ ï¼Œstringå±žæ€§è¿”å›žä¼šæ˜¯Noneï¼Œè€Œä¸æ˜¯åƒtextå±žæ€§ä¸­é‚£æ ·çš„æ–‡æœ¬ä¿¡æ¯ã€‚ å¦‚æžœHTMLä¸­çš„å†…å®¹ç»“æž„åƒä¸‹é¢è¿™æ ·:1234&lt;td&gt;some text&lt;/td&gt; &lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;p&gt;more text&lt;/p&gt;&lt;/td&gt;&lt;td&gt;even &lt;p&gt;more text&lt;/p&gt;&lt;/td&gt; td ä¸Šçš„.stringå±žæ€§å°†ä¼šè¿”å›žä¸‹é¢çš„å†…å®¹ï¼š1ã€some text2ã€None3ã€more text4ã€None .text å±žæ€§å°†ä¼šè¿”å›žä¸‹é¢çš„å†…å®¹ï¼š1ã€some text2ã€3ã€more text4ã€even more text å¦‚æžœæƒ³è¦äº†è§£.findå’Œ.stringä¹‹é—´çš„å·®å¼‚å¯ä»¥æŸ¥çœ‹Python BeautifulSoup ä¸­.textä¸Ž.stringçš„åŒºåˆ« è§£å†³åŠžæ³•æ˜¯ä½¿ç”¨lambdaå‡½æ•°12&gt;&gt;&gt; soup.find_all(lambda e: e.name == &apos;td&apos; and &apos;Black&apos; in e.text)[&lt;td id=&quot;rp10&quot; valign=&quot;top&quot;&gt;Black or African American alone, percent, 2013 (a) &lt;!-- RHI225213 --&gt; &lt;/td&gt;, &lt;td id=&quot;re6&quot; valign=&quot;top&quot;&gt;Black-owned firms, percent, 2007 &lt;!-- SBO315207 --&gt; &lt;/td&gt;]]]></content>
      <tags>
        <tag>BeautifulSoup4</tag>
        <tag>pythonçˆ¬è™«</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è§£å†³å…¬ç½‘æ— æ³•è®¿é—®é˜¿é‡Œäº‘ECSæ­å»ºçš„MongoDBæœåŠ¡]]></title>
    <url>%2F2018%2F08%2F28%2F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%85%AC%E7%BD%91%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%90%AD%E5%BB%BA%E7%9A%84MongoDB%E6%9C%8D%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘ä¸ºäº†å­¦ä¹ åŽç«¯è´­ä¹°äº†ä¸€å°é˜¿é‡Œäº‘ECSäº‘æœåŠ¡å™¨ï¼ˆä¸“ç”¨ç½‘ç»œï¼‰çŽ¯å¢ƒå¦‚ä¸‹ï¼šOSï¼šUbuntu16.04ï¼ŒMongoDBï¼šv4.0.1 å°è¯•ç€å®‰è£…äº†MongoDBå¹¶è¿›è¡Œäº†ç›¸åº”çš„é…ç½®ï¼Œæœç´¢äº†ä¸€äº›èµ„æ–™å‘çŽ°å…³é”®åœ¨äºŽä¸‰ç‚¹ï¼š MongoDBçš„bindIpé…ç½®ï¼š MongoDBé»˜è®¤çš„é…ç½®æ–‡ä»¶ä¸­ï¼ŒbindIpé€‰é¡¹é»˜è®¤æ˜¯localhostï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤åªæœ‰å®‰è£…äº†MongoDBçš„ä¸»æœºè‡ªå·±èƒ½å¤Ÿè®¿é—®ã€‚æ‰€ä»¥å¦‚æžœéœ€è¦å¤–ç½‘çš„ä¸»æœºèƒ½å¤Ÿè®¿é—®MongoDBæœåŠ¡ï¼Œé¦–å…ˆéœ€è¦æ›´æ”¹bindIpé€‰é¡¹ï¼Œå°†å…¶è®¾ç½®ä¸ºæŒ‡å®šçš„IPåœ°å€(x.x.x.x, â€¦)è€…ç»‘å®šæ‰€æœ‰çš„IPåœ°å€(0.0.0.0 )ã€‚MongoDB 3.6ä¹‹åŽçš„ç‰ˆæœ¬æ–°å¢žäº†bindIpAllé€‰é¡¹ï¼Œtrueä»£è¡¨ç»‘å®šæ‰€æœ‰IPåœ°å€ã€‚ é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142# mongod.conf# for documentation of all options, see:# http://docs.mongodb.org/manual/reference/configuration-options/# Where and how to store data.storage: dbPath: /var/lib/mongodb journal: enabled: true# engine:# mmapv1:# wiredTiger:# where to write logging data.systemLog: destination: file logAppend: true path: /var/log/mongodb/mongod.log# network interfacesnet: port: 27017 bindIpAll: true # how the process runsprocessManagement: timeZoneInfo: /usr/share/zoneinfo#security:#operationProfiling:#replication:#sharding:## Enterprise-Only Options:#auditLog:#snmp: Linuxé˜²ç«å¢™iptablesçš„é…ç½®ï¼š åœ¨bashä¸­è¾“å…¥sudo iptables -A INPUT -p tcp --destination-port 27017 -m state --state NEW,ESTABLISHED -j ACCEPTsudo iptables -A OUTPUT -p tcp --source-port 27017 -m state --state ESTABLISHED -j ACCEPT å¼€æ”¾MongoDBçš„ç«¯å£ã€‚ æŽ¥ç€è¾“å…¥iptables-saveå’Œ iptables-restoreä¿å­˜iptablesçš„é…ç½®ä¿¡æ¯ä»¥å…ä¸»æœºé‡å¯åŽéœ€è¦é‡æ–°é…ç½®ã€‚ ECSä¸»æœºçš„å®‰å…¨ç»„è§„åˆ™é…ç½®ï¼š ç»è¿‡ä»¥ä¸Šçš„é…ç½®åŽï¼Œå°±èƒ½å¤Ÿè¿œç¨‹è¿žæŽ¥é˜¿é‡Œäº‘ECSä¸Šæ­å»ºçš„MongoDBæœåŠ¡äº†ã€‚]]></content>
      <tags>
        <tag>MongoDB</tag>
        <tag>Ubuntu</tag>
        <tag>é˜¿é‡Œäº‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[(è¯‘)7ä¸ªES6ç¼–ç¨‹å°æŠ€å·§]]></title>
    <url>%2F2018%2F05%2F20%2F7-Hacks-for-ES6-Developers%2F</url>
    <content type="text"><![CDATA[1. äº¤æ¢å˜é‡ä½¿ç”¨æ•°ç»„è§£æž„æ¥äº¤æ¢å˜é‡çš„å€¼1234let a = &apos;world&apos;, b = &apos;hello&apos;;[a, b] = [b, a];console.log(a); // helloconsole.log(b); // world 2. Async/Awaitå’Œè§£æž„å°†æ•°ç»„è§£æž„å’Œasync/awaitä»¥åŠpromiseç»“åˆå¯ä»¥ä½¿å¤æ‚çš„æ•°æ®æµå˜å¾—ç®€å•1234const [user, account] = await Promise.all([ fetch(&apos;/user&apos;), fetch(&apos;/account&apos;)]); 3. Debuggingconsole.logæ›´é…·çš„ä½¿ç”¨æ–¹æ³•ï¼š12345678const a = 5, b = 6, c = 7;console.log(&#123;a, b, c&#125;);// è¾“å‡º//&#123;// a: 5,// b: 6,// c: 7//&#125; 4. ä¸€è¡Œè§£å†³å¯¹äºŽæŸäº›æ•°ç»„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨æ›´ä¸ºç®€æ´çš„è¯­æ³•1234567//æ‰¾å‡ºæœ€å¤§å€¼const max = (arr) =&gt; Math.max(...arr);max([123, 321, 23]); //è¾“å‡º 321//æ•°ç»„æ±‚å’Œconst sum = (arr) =&gt; arr.reduce((a, b) =&gt; (a + b), 0);sum([1, 2, 3, 4]); //è¾“å‡º 10 5. æ•°ç»„åˆå¹¶æ‰©å±•æ“ä½œç¬¦å¯ä»¥ç”¨æ¥ä»£æ›¿concatï¼š123456789101112const one = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;];const two = [&apos;d&apos;, &apos;e&apos;, &apos;f&apos;];const three = [&apos;g&apos;, &apos;h&apos;, &apos;i&apos;];//å¸¸è§„æ–¹æ³•1const result = one.concat(two, three);//å¸¸è§„æ–¹æ³•2const result = [].concat(one, two, three);//æ–°æ–¹æ³•const result = [...one, ...two, ...three]; 6. å…‹éš†12const obj = &#123; ...oldObj &#125;;const arr = [ ...oldArr ]; æ³¨ï¼šä»¥ä¸Šæ–¹æ³•åˆ›å»ºçš„æ˜¯ä¸€ä¸ªæµ…å…‹éš† 7. å‘½åå‚æ•°é€šè¿‡ä½¿ç”¨è§£æž„æ“ä½œç¬¦è®©å‡½æ•°æ›´æ˜“è¯»ï¼š123456789101112const getStuffNotBad = (id, force, verbose) =&gt; &#123; ...&#125;const getStuffAwesome = (&#123; id, name, force, verbose &#125; =&gt; &#123; ...&#125;)//è¿™ç§æ–¹æ³•è®©äººä¸€æ—¶ä¸çŸ¥é“è¿™ä¸ªå‡ ä¸ªå‚æ•°è¡¨ç¤ºçš„æ˜¯ä»€ä¹ˆgetStuffNotBad(150, true, true);//å‚æ•°æ„æ€ä¸€ç›®äº†ç„¶getStuffAwesome(&#123; id: 150, force: true, verbose: true &#125;); æ³¨ï¼š æœ¬æ–‡ç‰ˆæƒå½’åŽŸä½œè€…æ‰€æœ‰ï¼Œä»…ç”¨äºŽå­¦ä¹ ä¸Žäº¤æµï¼› å¦‚éœ€è½¬è½½è¯‘æ–‡ï¼Œçƒ¦è¯·æŒ‰ä¸‹æ–¹æ³¨æ˜Žå‡ºå¤„ä¿¡æ¯ï¼Œè°¢è°¢ï¼åŽŸæ–‡ï¼š 7 Hacks for ES6 Developersä½œè€…ï¼š Tal Bereznitskeyè¯‘è€…ï¼šsmallboneè¯‘æ–‡åœ°å€ï¼šhttps://medium.com/dailyjs/7-hacks-for-es6-developers-4e24ff425d0b é˜…è¯»åŽŸæ–‡]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•è§£å†³WebSocketçš„å…¼å®¹æ€§]]></title>
    <url>%2F2018%2F05%2F06%2F%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3WebSocket%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬çŸ¥é“WebSocketæ˜¯ä¸€ç§åœ¨æœåŠ¡å™¨ä¸Žå®¢æˆ·ç«¯åŒå‘é€šè®¯çš„æŠ€æœ¯ï¼Œä½¿ç”¨åŽŸç”Ÿçš„WebSocketå¯ä»¥æœ€å°åŒ– æœåŠ¡å™¨èµ„æºçš„ä½¿ç”¨å¹¶ä¸”ä¸ºä¸¤è€…æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„é€šä¿¡æ–¹å¼ã€‚éšç€HTML5çš„æ™®åŠï¼ŒçŽ°ä»£æµè§ˆå™¨ï¼ˆIE10+ï¼‰åŸºæœ¬ä¸Šéƒ½å·²ç»åŽŸç”Ÿæ”¯æŒWebSocketäº†ï¼Œä¸‹é¢æ˜¯æ”¯æŒWebSocketåè®®çš„æµè§ˆå™¨ï¼š Internet Explorer 10 Firefox 6 Chrome 14 Safari 6.0 Opera 12.1 iOS Safari 6.0 Chrome for Android 27.0ä½†æ˜¯å¯¹äºŽæ—§çš„æµè§ˆå™¨è¯¥å¦‚ä½•å®žçŽ°WebSocketçš„åŠŸèƒ½å‘¢ï¼Ÿä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹å‡ ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼š1. SockJSSockJSæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œå®ƒä¸ºæµè§ˆå™¨æä¾›äº†ä¸€ä¸ªç±»ä¼¼WebSocketçš„å¯¹è±¡ã€‚é¦–å…ˆï¼Œå®ƒä¼šä¼˜å…ˆä½¿ç”¨åŽŸç”Ÿçš„WebSocketï¼›å¦‚æžœä¸æ”¯æŒï¼Œåˆ™ä½¿ç”¨streamingï¼›å¦‚æžœstreamingä¹Ÿä¸æ”¯æŒï¼Œåˆ™ä½¿ç”¨è½®è¯¢ï¼ˆpollingï¼‰ã€‚ä¸‹é¢æ˜¯æ”¯æŒçš„æµè§ˆå™¨æ¦‚è§ˆï¼š æ—¢ç„¶æ¨¡æ‹ŸWebSocketåŒå‘é€šä¿¡ï¼Œé‚£ä¹ˆä½¿ç”¨SockJSæ—¶ï¼Œä¹Ÿè¦é…åˆä½¿ç”¨ç›¸åº”çš„æœåŠ¡å™¨ç«¯çš„åº“ï¼Œä¸‹é¢å¯ä»¥ä½¿ç”¨çš„æœåŠ¡å™¨ç«¯åº“ï¼š SockJS-node SockJS-erlang SockJS-tornado SockJS-twisted SockJS-ruby SockJS-netty SockJS-gevent (SockJS-gevent fork) SockJS-goå®¢æˆ·ç«¯çš„ä½¿ç”¨é¦–å…ˆåŠ è½½SockJSåº“1&lt;script src=&quot;https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js&quot;&gt;&lt;/script&gt; åº“åŠ è½½å®ŒåŽï¼Œ å°±å¯ä¸ŽSockJSæœåŠ¡å™¨å»ºç«‹è¿žæŽ¥äº†1234567891011121314var sock = new SockJS(&apos;https://mydomain.com/my_prefix&apos;); sock.onopen = function() &#123; console.log(&apos;open&apos;); sock.send(&apos;test&apos;); &#125;; sock.onmessage = function(e) &#123; console.log(&apos;message&apos;, e.data); sock.close(); &#125;; sock.onclose = function() &#123; console.log(&apos;close&apos;); &#125;; æœåŠ¡å™¨ç«¯çš„ä½¿ç”¨(NodeJS)é¦–å…ˆï¼Œå®‰è£…sockjs-node:1npm install sockjs æŽ¥ç€å°±å¯ä»¥é€šè¿‡ç›‘å¬äº‹ä»¶æ¥ä¸Žå®¢æˆ·ç«¯è¿›è¡Œç±»ä¼¼WebSocketçš„é€šä¿¡äº†1234567891011121314var http = require(&apos;http&apos;);var sockjs = require(&apos;sockjs&apos;);var echo = sockjs.createServer(&#123; sockjs_url: &apos;http://cdn.jsdelivr.net/sockjs/1.0.1/sockjs.min.js&apos; &#125;);echo.on(&apos;connection&apos;, function(conn) &#123; conn.on(&apos;data&apos;, function(message) &#123; conn.write(message); &#125;); conn.on(&apos;close&apos;, function() &#123;&#125;);&#125;);var server = http.createServer();echo.installHandlers(server, &#123;prefix:&apos;/echo&apos;&#125;);server.listen(9999, &apos;0.0.0.0&apos;); 2. Socket.IOSocket.IOèƒ½å¤Ÿå¯ç”¨åŸºäºŽäº‹ä»¶çš„åŒå‘é€šä¿¡ï¼Œä½¿ç”¨å®ƒåŒæ ·ä¹Ÿéœ€è¦æ­å»ºç›¸åº”çš„æœåŠ¡ç«¯ï¼›é¦–å…ˆå®ƒä¹Ÿä¼šé¦–é€‰WebSocketï¼Œå¦‚æžœä¸æ”¯æŒåˆ™ä¼šä½¿ç”¨ä¸‹é¢çš„æ›¿ä»£æ–¹æ¡ˆï¼š Adobe Flash Socketï¼ˆç¼ºç‚¹ï¼šéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šæ‰“å¼€ä¸€ä¸ªé¢å¤–çš„ç«¯å£ï¼Œé»˜è®¤ä¸º10843ï¼‰ Ajax long polling Ajax multipart streaming Forever iframe JSONP pollingæµè§ˆå™¨å…¼å®¹æ€§ å®¢æˆ·ç«¯1234567891011//åŠ è½½Socket.IOåº“&lt;script src=&quot;http://localhost:8181/socket.io/socket.io.js&quot;&gt;&lt;/script&gt;&lt;script&gt; var socket = io.connect(&apos;http://localhost:8181&apos;); console.log(&apos;a user connected&apos;); socket.emit(&apos;my other event&apos;, &#123; my: &apos;data&apos; &#125;); socket.on(&apos;disconnect&apos;, function()&#123; console.log(&apos;user disconnected&apos;); &#125;); &#125;);&lt;/script&gt; æœåŠ¡ç«¯å®‰è£…socket.io1npm install socket.io --save é…ç½®æœåŠ¡å™¨12345678var server = require(&apos;http&apos;).createServer();var io = require(&apos;socket.io&apos;)(server);io.on(&apos;connection&apos;, function(socket)&#123; socket.emit(&apos;news&apos;, &#123; hello: &apos;world&apos; &#125;); socket.on(&apos;event&apos;, function(data)&#123;&#125;); socket.on(&apos;disconnect&apos;, function()&#123;&#125;);&#125;);server.listen(3000);]]></content>
      <tags>
        <tag>WebSocket</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¦‚ä½•ä½¿ç”¨File APIsæ¥è¯»å–æ–‡ä»¶]]></title>
    <url>%2F2018%2F04%2F26%2F%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8File-APIs%E6%9D%A5%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[å…¼å®¹æ€§æ£€æŸ¥12345if (window.File &amp;&amp; window.FileReader &amp;&amp; window.FileList &amp;&amp; window.Blob) &#123; //æ”¯æŒFile APIs&#125; else &#123; //ä¸æ”¯æŒFile APIs&#125; FileReader()FileReaderå¯¹è±¡è®©webåº”ç”¨ç¨‹åºå¯ä»¥å¼‚æ­¥åœ°è¯»å–å­˜å‚¨åœ¨ç”¨æˆ·ç”µè„‘ä¸Šçš„æ–‡ä»¶(æˆ–è€…åŽŸå§‹æ•°æ®ç¼“å†²åŒº)çš„å†…å®¹ã€‚åœ¨JavaScriptä¸­ï¼ŒFileReaderdå¯¹è±¡é€šè¿‡ä¼ å…¥ä¸¤ç§ç›¸åº”çš„å¯¹è±¡(Fileå’ŒBlob)æ¥è¿›è¡Œæ•°æ®çš„è¯»å–ï¼Œè€Œä¸”è¿™ä¸ªæ–¹æ³•åœ¨Web Workersä¸­ä¹Ÿèƒ½ä½¿ç”¨ã€‚ FileReader åŒ…æ‹¬å››ä¸ªå¼‚æ­¥è¯»å–æ–‡ä»¶çš„é€‰é¡¹ï¼š FileReader.readAsBinaryString(Blob|File) - è¿”å›žå€¼çš„result å±žæ€§å°†åŒ…å«äºŒè¿›åˆ¶å­—ç¬¦ä¸²å½¢å¼çš„file/blob æ•°æ®ã€‚æ¯ä¸ªå­—èŠ‚å‡ç”±ä¸€ä¸ª [0..255] èŒƒå›´å†…çš„æ•´æ•°è¡¨ç¤ºã€‚ FileReader.readAsText(Blob|File, opt_encoding) - è¿”å›žå€¼çš„result å±žæ€§å°†åŒ…å«æ–‡æœ¬å­—ç¬¦ä¸²å½¢å¼çš„ file/blob æ•°æ®ã€‚è¯¥å­—ç¬¦ä¸²åœ¨é»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨â€œUTF-8â€ç¼–ç ã€‚ä½¿ç”¨å¯é€‰ç¼–ç å‚æ•°å¯æŒ‡å®šå…¶ä»–æ ¼å¼ã€‚ FileReader.readAsDataURL(Blob|File) - è¿”å›žå€¼çš„result å±žæ€§å°†åŒ…å«ç¼–ç ä¸ºæ•°æ®ç½‘å€çš„ file/blob æ•°æ®ã€‚ FileReader.readAsArrayBuffer(Blob|File) - è¿”å›žå€¼çš„result å±žæ€§å°†åŒ…å« ArrayBuffer å¯¹è±¡å½¢å¼çš„ file/blob æ•°æ®ã€‚ FileReader å¯¹è±¡è°ƒç”¨å…¶ä¸­æŸä¸€ç§è¯»å–æ–¹æ³•åŽï¼Œå¯ä½¿ç”¨ onloadstartã€onprogressã€onloadã€onabortã€onerror å’Œ onloadend è·Ÿè¸ªå…¶è¿›åº¦ã€‚ è¯»å–æ–‡ä»¶å¹¶æ˜¾ç¤ºè¿›åº¦ä¸‹é¢çš„ç¤ºä¾‹ä»Žç”¨æˆ·é€‰æ‹©çš„å†…å®¹ä¸­è¿‡æ»¤æŽ‰äº†å›¾ç‰‡ï¼Œå¯¹æ–‡ä»¶è°ƒç”¨ reader.readAsDataURL()ï¼Œå¹¶é€šè¿‡å°†â€œsrcâ€å±žæ€§è®¾ä¸ºæ•°æ®ç½‘å€æ¥å‘ˆçŽ°ç¼©ç•¥å›¾ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124&lt;style&gt; .thumb &#123; height: 75px; border: 1px solid #000; margin: 10px 5px 0 0; &#125; #list &#123; border: 1px solid lightgrey; padding: 15px; text-align: center; &#125; #progress_bar &#123; margin: 10px 0; padding: 3px; border: 1px solid #000; font-size: 14px; clear: both; opacity: 0; -moz-transition: opacity 1s linear; -o-transition: opacity 1s linear; -webkit-transition: opacity 1s linear; &#125; #progress_bar.loading &#123; opacity: 1.0; &#125; #progress_bar .percent &#123; background-color: #99ccff; height: auto; width: 0; &#125;&lt;/style&gt;&lt;body&gt; &lt;input type=&quot;file&quot; name=&quot;files[]&quot; id=&quot;files&quot; multiple /&gt; &lt;div id=&quot;list&quot;&gt;&lt;/div&gt; &lt;button onclick=&quot;abortRead();&quot;&gt;Cancel read&lt;/button&gt; &lt;script&gt; let reader; let progress; let progress_bar; function abortRead() &#123; reader.abort(); &#125; function errorHandler(evt) &#123; let error = evt.target.error; switch (error.code) &#123; case error.NOT_FOUND_ERR: alert(&apos;æ²¡æœ‰æ‰¾åˆ°æ–‡ä»¶&apos;); break; case error.NOT_READABLE_ERR: alert(&apos;æ— æ³•è¯»å–æ–‡ä»¶&apos;); break; case error.ABORT_ERR: break; default: alert(&apos;æ–‡ä»¶è¯»å–é”™è¯¯&apos;); &#125; &#125; function updateProgress(evt) &#123; if (evt.lengthComputable) &#123; let percentLoaded = Math.round((evt.loaded / evt.total) * 100); if (percentLoaded &lt; 100) &#123; progress.style.width = percentLoaded + &apos;%&apos;; progress.textContent = percentLoaded + &apos;%&apos;; &#125; &#125; &#125; function handleFileSelect(evt) &#123; let files = evt.target.files; //åˆ›å»ºè¿›åº¦æ¡ progress_bar = document.createElement(&apos;div&apos;); progress_bar.id = &apos;progress_bar&apos;; progress = document.createElement(&apos;div&apos;); progress.className = &apos;percent&apos;; progress.style.width = &apos;0%&apos;; progress.textContent = &apos;0%&apos;; progress_bar.appendChild(progress); document.getElementById(&apos;list&apos;).appendChild(progress_bar); for (let i = 0; i &lt; files.length; i++) &#123; reader = new FileReader(); if (!files[i].type.match(&apos;image.*&apos;)) &#123; alert(&apos;é€‰æ‹©çš„æ–‡ä»¶ä¸æ˜¯å›¾ç‰‡&apos;); abortRead(); return; &#125; reader.onerror = errorHandler; reader.onprogress = updateProgress; reader.onabort = (e) =&gt; &#123; alert(&apos;æ–‡ä»¶è¯»å–å·²å–æ¶ˆ&apos;); &#125;; reader.onloadstart = (e) =&gt; &#123; progress_bar.className = &apos;loading&apos;; &#125;; reader.onload = (e) =&gt; &#123; let span = document.createElement(&apos;span&apos;); span.innerHTML = [&apos;&lt;img class=&quot;thumb&quot; src=&quot;&apos;, e.target.result, &apos;&quot; title=&quot;&apos;, files[i].name, &apos;&quot;/&gt;&apos;].join(&apos;&apos;); document.getElementById(&apos;list&apos;).insertBefore(span, progress_bar); progress.style.width = &apos;100%&apos;; progress.textContent = &apos;100%&apos;; &#125;; reader.readAsDataURL(files[i]); &#125; &#125; document.getElementById(&apos;files&apos;).addEventListener(&apos;change&apos;, handleFileSelect, false); &lt;/script&gt;&lt;/body&gt; See the Pen FileReader Demo by Lu (@smallbone) on CodePen. FileList APIå­—é¢ä¸Šå¯ä»¥ç†è§£ä¸ºå¤šä¸ªFileå¯¹è±¡ç»„åˆæˆçš„æ•°ç»„ï¼Œä½†æ˜¯åªæœ‰lengthå±žæ€§å’Œitem(index)æ–¹æ³•ï¼Œè®¿é—®å…¶ä¸­çš„Fileå¯¹è±¡æ—¢å¯ä»¥ä½¿ç”¨files.item(index)ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨files[index]çš„æ–¹æ³•ã€‚ File APIFileå¯¹è±¡æ˜¯ä¸€ç§ç‰¹å®šç±»åž‹çš„Blobã€‚FileReader, URL.createObjectURL(), createImageBitmap(), ä»¥åŠXMLHttpRequest.send() éƒ½æŽ¥å—Blobså’ŒFilesã€‚ Fileå¯¹è±¡åŒ…å«çš„ä¿¡æ¯12345678&#123; lastModified: 1428005315000, lastModifiedDate: Thu Apr 02 2015 15:08:35 GMT-0500 (CDT), name: &quot;profile.pdf&quot;, size: 135568, type: &quot;application/pdf&quot;, webkitRelativePath: &quot;&quot;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œtypeæ˜¯æ ¹æ®æ–‡ä»¶æ‰©å±•åæ¥åˆ¤æ–­çš„ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯å¾ˆå¯é ã€‚æ ¹æ®ä¸Šé¢Fileå¯¹è±¡çš„ä¿¡æ¯å…¶å®žå°±å¯ä»¥å®žçŽ°ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½äº†ï¼Œæ¯”å¦‚é™åˆ¶æ–‡ä»¶ä¸Šä¼ çš„å¤§å°ï¼Œåˆæ­¥çš„é™åˆ¶æ–‡ä»¶ä¸Šä¼ çš„ç±»åž‹(å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡inputå…ƒç´ çš„acceptå±žæ€§æ¥å®žçŽ°ï¼Œä½†æ˜¯æœ€ç»ˆçš„ç±»åž‹éªŒè¯è¿˜æ˜¯éœ€è¦åœ¨æœåŠ¡å™¨ç«¯å®žçŽ°)ã€‚ Fileå¯¹è±¡ä¸€èˆ¬é€šè¿‡ä»¥ä¸‹é€”å¾„è¿”å›žçš„FileListå¯¹è±¡èŽ·å–ï¼š &lt;input type=&quot;file&quot;&gt;çš„å…ƒç´  æ‹–æ‹½æ“ä½œçš„DataTransferå¯¹è±¡ é€šè¿‡åœ¨ä¸€ä¸ªHTMLCanvasElementä¸Šè°ƒç”¨mozGetAsFile() API é€šè¿‡inputæ¥é€‰æ‹©æ–‡ä»¶1234567/* å‡è®¾inputå…ƒç´ ä¸º&lt;input type=&quot;file&quot; id=&quot;upload&quot; multiple&gt; *///multipleè¡¨ç¤ºä¸€æ¬¡æ”¯æŒå¤šä¸ªæ–‡ä»¶ä¸Šä¼ let uploadInput = document.getElementById(&apos;upload&apos;);uploadInput.addEventListener(&apos;change&apos;, ()=&gt;&#123; let fileList = uploadInput.files; console.log(fileList);&#125;); ç”±äºŽFileListå¯¹è±¡å¹¶æ²¡æœ‰forEach()æ–¹æ³•ï¼Œæ‰€ä»¥ä¸€èˆ¬éœ€è¦é€šè¿‡forå¾ªçŽ¯æ¥éåŽ†å…¶ä¸­çš„æ¯ä¸ªFileå¯¹è±¡ï¼š123for (var i = 0; fileCount = fileList.length; i &lt; fileCount; i++) &#123; console.log(fileList[i]);&#125; ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼æ¥ä½¿ç”¨forEach()æ–¹æ³•ï¼š123456789//1.callæ–¹æ³•[].forEach.call(fileList, (file, i, fileList)=&gt;&#123; ...&#125;);//2.ES6æ–¹æ³•Array.from(uploadInput).forEach((i)=&gt;&#123; ...&#125;); é€šè¿‡æ‹–æ‹½(drag&amp;drop)é€‰æ‹©æ–‡ä»¶æ‹–æ‹½äº‹ä»¶ï¼š drag(å¼€å§‹æ‹–åŠ¨ï¼ŒæŒç»­äº‹ä»¶) dragend(é‡Šæ”¾é¼ æ ‡æˆ–è€…æŒ‰ä¸‹ESCï¼Œç»“æŸæ‹–åŠ¨) dragenter(è¿›å…¥æœ‰æ•ˆçš„æ‹–æ‹½åŒºåŸŸæ—¶) dragexit(å½“ä¸€ä¸ªå…ƒç´ ä¸å†æ˜¯æ‹–åŠ¨æ“ä½œçš„ç›´æŽ¥é€‰æ‹©ç›®æ ‡æ—¶) dragleave(ç¦»å¼€æœ‰æ•ˆçš„æ‹–æ‹½åŒºåŸŸæ—¶) dragover(æ‚¬åœåœ¨æœ‰æ•ˆçš„æ‹–æ‹½åŒºåŸŸå†…æ—¶ï¼ŒæŒç»­äº‹ä»¶) dragstart(å¼€å§‹æ‹–åŠ¨) drop(ç›®æ ‡æ”¾ç½®åˆ°æœ‰æ•ˆçš„æ‹–æ‹½åŒºåŸŸæ—¶) å…¶ä¸­éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š å¦‚æžœdragoveräº‹ä»¶ä¸é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼Œdropäº‹ä»¶å°±ä¸ä¼šè¢«è§¦å‘ã€‚ dragexitå’Œdragleaveåœ¨ä¸åŒæµè§ˆå™¨ä¸­çš„è§¦å‘å­˜åœ¨å·®å¼‚ï¼Œdragexitåœ¨Chromeæµè§ˆå™¨ä¸­å°±æ°¸è¿œä¸ä¼šè¢«è§¦å‘ã€‚ 12345678910111213141516171819202122232425262728//æ‹–æ‹½å’Œæ˜¾ç¤ºåŒºåŸŸ&lt;div id=&quot;drop_zone&quot;&gt;Drop files here&lt;/div&gt;&lt;output id=&quot;list&quot;&gt;&lt;/output&gt;&lt;script&gt; function handleFileSelect(evt) &#123; evt.stopPropagation(); evt.preventDefault(); //æ³¨æ„è¿™é‡Œä¸å†æ˜¯target.files let files = evt.dataTransfer.files; let output = []; [].forEach.call(files, (file)=&gt;&#123; output.push(&apos;&lt;li&gt;&lt;strong&gt;&apos;, file.name, &apos;&lt;/strong&gt; (&apos;, file.type || &apos;n/a&apos;, &apos;) - &apos;, (file.size/1024).toFixed(3), &apos; Kb, last modified date: &apos;, file.lastModifiedDate.toLocaleDateString(), &apos;&lt;/li&gt;&apos;); &#125;); document.getElementById(&apos;list&apos;).innerHTML = &apos;&lt;ul&gt;&apos; + output.join(&apos;&apos;) + &apos;&lt;/ul&gt;&apos;; &#125; function handleDragOver(evt) &#123; evt.stopPropagation(); evt.preventDefault(); evt.dataTransfer.dropEffect = &apos;copy&apos;; &#125; let dropZone = document.getElementById(&apos;drop_zone&apos;); dropZone.addEventListener(&apos;dragover&apos;, handleDragOver, false); dropZone.addEventListener(&apos;drop&apos;, handleFileSelect, false);&lt;/script&gt;]]></content>
      <tags>
        <tag>File APIs</tag>
        <tag>HTML5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebSocketç®€ä»‹]]></title>
    <url>%2F2018%2F04%2F21%2FWebSocket%2F</url>
    <content type="text"><![CDATA[WebSocket æ˜¯ä¸€ç§åŸºäºŽTCPçš„æä¾›å…¨åŒå·¥/åŒå‘é€šä¿¡çš„é€šä¿¡åè®®ï¼Œå› ä¸ºå®ƒåŽŸç”Ÿæ”¯æŒè·¨åŸŸï¼Œä¸”å®‰å…¨æ€§è¾ƒé«˜ï¼Œè€Œä¸”ä¸Šæ‰‹å®¹æ˜“ï¼Œæ˜¯å¾ˆå¥½çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œç”šè‡³å¯ä»¥å¾ˆå®¹æ˜“çš„æ­å»ºä¸€ä¸ªèŠå¤©å®¤ã€‚ ä½¿ç”¨æ–¹æ³•å®¢æˆ·ç«¯12//WebSocketæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯URL(å¿…é¡»çš„)ï¼Œä¸€ä¸ªæ˜¯æ‰€ä½¿ç”¨çš„å­åè®®ï¼ˆå¯é€‰ï¼‰ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥æ˜¯æ•°ç»„ï¼Œæ²¡æœ‰æŒ‡å®šåˆ™ä¸ºç©ºå­—ç¬¦ã€‚httpä½¿ç”¨wsï¼Œhttpsä½¿ç”¨wssvar ws = new WebSocket(&apos;ws://hostname:port&apos;) æœåŠ¡å™¨(NodeJS)123//create WebSocket Servervar WebSocketServer = require(&apos;ws&apos;).Server;var wss = new WebSocketServer(&#123;port: 8181&#125;); WebSocketäº‹ä»¶ open 123ws.onopen = function(e) &#123; ...&#125; message 123ws.onmessage = function(e) &#123; ...&#125; error 123ws.onerror = function(e) &#123; ...&#125; close 123ws.onclose = function(e) &#123; ...&#125; WebSocketæ–¹æ³• send()å¯ä»¥ä¼ è¾“ä¸¤ç§ç±»åž‹çš„ä¹‹ï¼šstringå’Œbinaryï¼›å› ä¸ºWebSocketæ˜¯äº‹ä»¶é©±åŠ¨çš„åè®®ï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿è¿žæŽ¥å·²ç»æ‰“å¼€å¹¶ä¸”å·²ç»å‡†å¤‡å¥½æŽ¥æ”¶ä¿¡æ¯äº†ã€‚ 12345678910111213var ws = new WebSocket(&apos;ws://localhost:8181&apos;);ws.onopen = function(e) &#123; ws.send(JSON.stringigy(stock_request));&#125;//orfunction processEvent(e) &#123; if(ws.readState === WebSocket.OPEN) &#123; //Socket open, send ws.send(e); &#125; else &#123; //Show an error, queue it for sending later, etc &#125;&#125; close() 123ws.close();//or pass a numeric code and human-readable stringws.close(100, &quot;Goodbye, World!&quot;); WebSocket close()æ–¹æ³•çŠ¶æ€ç https://developer.mozilla.org/zh-CN/docs/Web/API/CloseEvent WebSocket å±žæ€§å½“openäº‹ä»¶è§¦å‘åŽï¼ŒWebSocketå¯¹è±¡ä¼šæœ‰å‡ ä¸ªå±žæ€§å¯ä»¥è¢«å®¢æˆ·ç«¯åº”ç”¨è¯»å–ã€‚ readyState| å±žæ€§å| å€¼| æè¿°|| :â€”â€”â€“ | â€”â€”â€“:|:â€“ || WebSocket.CONNECTING| 0 | è¿žæŽ¥è¿˜æœªæ‰“å¼€|| WebSocket.OPEN| 1 | è¿žæŽ¥å·²æ‰“å¼€å¹¶å‡†å¤‡é€šä¿¡|| WebSocket.CLOSING | 2 | æ­£åœ¨å…³é—­è¿žæŽ¥ || WebSocket.CLOSED | 3 | è¿žæŽ¥å·²å…³é—­ | bufferedAmountå¸¸ç”¨äºŽå‘é€äºŒè¿›åˆ¶æ•°æ®ï¼Œç¡®ä¿åœ¨è¿žæŽ¥å…³é—­å‰æ‰€æœ‰æ•°æ®å·²ç»å‘é€æˆ–è€…åœ¨å®¢æˆ·ç«¯æ‰§è¡ŒæŸäº›é™åˆ¶ protocolæœåŠ¡å™¨ç«¯æ‰€é‡‡ç”¨çš„å­åè®®ï¼ˆåœ¨ä½¿ç”¨WebSocketæž„é€ å™¨æ—¶æŒ‡å®šçš„protocolå‚æ•°ï¼Œå¦‚æžœæœåŠ¡å™¨æ²¡æœ‰é‡‡ç”¨åˆ™ä¸ºç©ºï¼‰ æ›´å¤šWebSocketè¯¦ç»†ä¿¡æ¯å‚è€ƒMDNçš„WebSocket API]]></content>
      <tags>
        <tag>WebSocket</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CSS Grid]]></title>
    <url>%2F2018%2F01%2F07%2FCSS-Grid%2F</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[(è¯‘)JavaScriptçš„å¼€é”€]]></title>
    <url>%2F2017%2F12%2F05%2FThe-cost-of-JavaScript%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ä»¬å»ºç«‹ä¸¥é‡ä¾èµ–äºŽJavaScriptçš„ç½‘ç«™æ—¶ï¼Œæˆ‘ä»¬ä¸æ€»æ˜¯å¾ˆå®¹æ˜“çœ‹åˆ°æˆ‘ä»¬å‘é€çš„å†…å®¹æ‰€ä»˜å‡ºçš„ä»£ä»·ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå¦‚æžœä½ å¸Œæœ›ä½ çš„ç½‘ç«™åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šèƒ½å¤Ÿå¿«é€ŸåŠ è½½å’Œäº’åŠ¨ï¼Œæˆ‘å°†ä»‹ç»ä¸ºä»€ä¹ˆä¸€äº›è§„åˆ™å¯ä»¥å¸®åŠ©ä½ ã€‚ tl;drï¼šè¾ƒå°‘çš„ä»£ç =è¾ƒå°‘çš„è§£æž/ç¼–è¯‘+è¾ƒå°‘çš„ä¼ è¾“+è¾ƒå°‘çš„è§£åŽ‹ç¼© ç½‘ç»œå½“å¤§å¤šæ•°å¼€å‘äººå‘˜è€ƒè™‘JavaScriptçš„æˆæœ¬æ—¶ï¼Œä»–ä»¬ä¼šè€ƒè™‘ä¸‹è½½å’Œæ‰§è¡Œæˆæœ¬ã€‚é€šè¿‡çº¿è·¯å‘é€æ›´å¤šå­—èŠ‚çš„JavaScriptéœ€è¦çš„æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·çš„è¿žæŽ¥ä¹Ÿå°±è¶Šæ…¢ã€‚ è¿™å¯èƒ½æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½¿åœ¨å‘è¾¾å›½å®¶ï¼Œå› ä¸ºç”¨æˆ·æœ‰æ•ˆçš„ç½‘ç»œè¿žæŽ¥ç±»åž‹å¯èƒ½å®žé™…ä¸Šå¹¶ä¸æ˜¯3Gï¼Œ4Gæˆ–WiFiã€‚ä½ å¯èƒ½åœ¨å’–å•¡åº—ä½¿ç”¨Wifiï¼Œä½†è¿žæŽ¥åˆ°çš„æ˜¯2Gçš„èœ‚çªçƒ­ç‚¹ã€‚ æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é™ä½Ž JavaScriptçš„ç½‘ç»œä¼ è¾“æˆæœ¬ï¼š åªå‘é€ç”¨æˆ·éœ€è¦çš„ä»£ç ã€‚ä»£ç æ‹†åˆ†è¿™æ—¶å€™å°±æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚ åŽ‹ç¼©ä»£ç ï¼ˆES515çš„ Uglifyï¼Œ ES2015çš„ babel- minifyæˆ–uglify -esï¼‰ é«˜åº¦åŽ‹ç¼©ï¼ˆä½¿ç”¨Brotliã€œq11ï¼ŒZopfliæˆ–gzipçš„ï¼‰ã€‚Brotliçš„åŽ‹ç¼©æ¯”è¶…è¿‡Gzipã€‚å®ƒè®©CertSimpleèŠ‚çœäº†17ï¼…çš„JSåŽ‹ç¼©å­—èŠ‚å¤§å°ï¼ŒLinkedInèŠ‚çœäº† 4ï¼…çš„åŠ è½½æ—¶é—´ã€‚ åˆ é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚é€šè¿‡DevToolsä»£ç è¦†ç›–æ¥ç¡®å®šã€‚å¯¹äºŽå‰¥ç¦»çš„ä»£ç ï¼Œå¯ä»¥æŸ¥çœ‹tree shakingï¼Œé—­åŒ…ç¼–è¯‘å™¨çš„é«˜çº§ä¼˜åŒ–å’Œå¾®è°ƒåº“æ’ä»¶å¦‚lodash-babel-pluginæ’ä»¶æˆ–WebPackçš„ContextReplacementPluginå¦‚Moment.jsåº“ã€‚ä½¿ç”¨babel-preset-envå’Œbrowserlistæ¥é¿å…çŽ°ä»£æµè§ˆå™¨ä¸­å·²ç»å­˜åœ¨çš„è½¬è¯‘åŠŸèƒ½ã€‚é«˜çº§å¼€å‘äººå‘˜å¯èƒ½ä¼šå‘çŽ°ä»”ç»†åˆ†æžWebpackæ†ç»‘åŒ…æœ‰åŠ©äºŽè¯†åˆ«ä¿®å‰ªä¸éœ€è¦çš„ä¾èµ–å…³ç³»ã€‚ ä½¿ç”¨HTTPç¼“å­˜ä»¥å°½é‡å‡å°‘ç½‘ç»œè·³è½¬ã€‚ç¡®å®šè„šæœ¬çš„æœ€ä½³ç”Ÿå‘½å‘¨æœŸï¼ˆmax-ageï¼‰å’Œæä¾›ä»¤ç‰ŒéªŒè¯ï¼ˆETagï¼‰ä»¥é¿å…ä¼ è¾“æ²¡æœ‰å˜æ›´çš„å­—èŠ‚ã€‚Service Workerç¼“å­˜å¯ä»¥ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºç½‘ç»œå…·æœ‰å¼¹æ€§ï¼Œè®©æ‚¨å¯ä»¥å¿«é€Ÿè®¿é—®V8çš„ä»£ç ç¼“å­˜ç­‰åŠŸèƒ½ã€‚äº†è§£æœ‰å…³æ–‡ä»¶åå“ˆå¸Œçš„é•¿æœŸç¼“å­˜ã€‚ è§£æž/ç¼–è¯‘ä¸€æ—¦JSä¸‹è½½å®Œæ¯•ï¼ŒJavaScriptæœ€å¤§çš„ä¸€ä¸ªæˆæœ¬å°±æ˜¯JSå¼•æ“Žè§£æž/ç¼–è¯‘è¿™æ®µä»£ç çš„æ—¶é—´ã€‚åœ¨Chrome DevToolsä¸­ï¼Œè§£æžå’Œç¼–è¯‘æ˜¯â€œæ€§èƒ½â€é¢æ¿ä¸­é»„è‰²â€œè„šæœ¬â€æ—¶é—´çš„ä¸€éƒ¨åˆ†ã€‚ Bottom-Up/Call Treeå…è®¸æŸ¥çœ‹ç¡®åˆ‡çš„è§£æž/ç¼–è¯‘æ—¶åºï¼šChrome DevToolsâ€œæ€§èƒ½â€é¢æ¿&gt;è‡ªä¸‹è€Œä¸Šã€‚é€šè¿‡å¯ç”¨V8çš„è¿è¡Œæ—¶è°ƒç”¨ç»Ÿè®¡ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åˆ†æžå’Œç¼–è¯‘é˜¶æ®µèŠ±è´¹çš„æ—¶é—´ ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆè¿™ä¼šæœ‰é—®é¢˜å‘¢ï¼ŸèŠ±è´¹å¾ˆé•¿æ—¶é—´è§£æž/ç¼–è¯‘ä»£ç ä¼šä¸¥é‡å»¶è¿Ÿç”¨æˆ·ä¸Žç½‘ç«™äº’åŠ¨çš„æ—¶é—´ã€‚å‘é€çš„JavaScriptè¶Šå¤šï¼Œåœ¨ç½‘ç«™äº¤äº’ä¹‹å‰è§£æžå’Œç¼–è¯‘çš„æ—¶é—´å°±è¶Šé•¿ã€‚ åŒæ ·å¤šçš„å­—èŠ‚ï¼Œæµè§ˆå™¨å¤„ç†JavaScriptè¦æ¯”åŒç­‰å¤§å°çš„å›¾åƒæˆ–Webå­—ä½“å¼€é”€æ›´å¤§ã€‚ - Tom Dale ä¸ŽJavaScriptç›¸æ¯”ï¼Œåœ¨å¤„ç†ç­‰æ•ˆå¤§å°çš„å›¾ç‰‡æ—¶ï¼ˆæ¶‰åŠåˆ°å¤§é‡çš„å›¾ç‰‡ä»ç„¶éœ€è¦è§£ç ï¼ï¼‰ï¼Œæ¶‰åŠåˆ°å¤§é‡çš„å¼€é”€ï¼Œä½†æ˜¯åœ¨ä¸€èˆ¬çš„ç§»åŠ¨è®¾å¤‡ä¸Šï¼ŒJSæ›´æœ‰å¯èƒ½å¯¹é¡µé¢çš„äº¤äº’æ€§äº§ç”Ÿè´Ÿé¢å½±å“ã€‚JavaScriptå’Œå›¾åƒå­—èŠ‚çš„å¼€é”€æœ‰å¾ˆå¤§çš„ä¸åŒã€‚å›¾åƒé€šå¸¸ä¸ä¼šé˜»å¡žä¸»çº¿ç¨‹ï¼Œä¹Ÿä¸ä¼šé˜»æ­¢æŽ¥å£åœ¨è§£ç å’Œæ …æ ¼åŒ–æ—¶è¿›è¡Œçš„äº¤äº’ã€‚ç„¶è€ŒJSç”±äºŽè§£æžï¼Œç¼–è¯‘å’Œæ‰§è¡Œçš„æˆæœ¬ä¼šå»¶è¿Ÿäº¤äº’æ€§ã€‚ å½“æˆ‘ä»¬è°ˆè®ºè§£æžå’Œç¼–è¯‘å˜æ…¢çš„æ—¶å€™ï¼Œä¸Šä¸‹æ–‡å¾ˆé‡è¦ - æˆ‘ä»¬åœ¨è¿™é‡Œè°ˆè®ºçš„æ™®é€šæ‰‹æœºã€‚æŒ‡çš„æ˜¯å¤§éƒ¨åˆ†ç”¨æˆ·ä½¿ç”¨çš„CPUå’ŒGPUé€Ÿåº¦è¾ƒæ…¢çš„æ‰‹æœºï¼Œæ— L2 / L3ç¼“å­˜ï¼Œç”šè‡³å¯èƒ½å†…å­˜å¾ˆå°ã€‚ ç½‘ç»œåŠŸèƒ½å’Œè®¾å¤‡åŠŸèƒ½å¹¶ä¸æ€»æ˜¯ç›¸åŒ¹é…ã€‚ä½¿ç”¨å…‰çº¤è¿žæŽ¥çš„ç”¨æˆ·ä¸ä¸€å®šæœ‰æœ€å¥½çš„CPUæ¥è§£æžå’Œæ‰§è¡Œå‘é€åˆ°ä»–ä»¬çš„è®¾å¤‡çš„JavaScriptã€‚åè¿‡æ¥ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªç³Ÿç³•çš„ç½‘ç»œè¿žæŽ¥ï¼Œä½†å´æœ‰ä¸€ä¸ªå¿«é€Ÿçš„CPUã€‚ - Kristofer Baxterï¼ŒLinkedIn åœ¨JavaScriptå¯åŠ¨æ€§èƒ½ä¸­ï¼Œæˆ‘æ³¨æ„åˆ°åœ¨ä½Žç«¯å’Œé«˜ç«¯ç¡¬ä»¶ä¸Šè§£æžå¤§çº¦1MBå·²ç»è¢«è§£åŽ‹çš„ï¼ˆç®€å•ï¼‰JavaScriptçš„å¼€é”€ã€‚åœ¨å¸‚åœºä¸Šæœ€å¿«çš„æ‰‹æœºå’Œæ™®é€šæ‰‹æœºä¹‹é—´è§£æž/ç¼–è¯‘ä»£ç çš„æ—¶é—´æœ‰2-5å€çš„å·®å¼‚ã€‚åœ¨ä¸åŒç±»åˆ«çš„æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡ä¸Šè§£æžä¸€ä¸ª1MBçš„JavaScriptåŒ…ï¼ˆçº¦æœ‰250KB è¢«gzipåŽ‹ç¼©äº†ï¼‰çš„è§£æžæ—¶é—´ã€‚åœ¨æŸ¥çœ‹è§£æžçš„å¼€é”€æ—¶ï¼Œè§£åŽ‹åŽçš„æ•°æ®è¦è€ƒè™‘åˆ°å¤§çº¦æœ‰250KB è¢«gzipåŽ‹ç¼©çš„ç©ºé—´ä¼šè¢«é‡Šæ”¾å‡ºæ¥å½“è§£åŽ‹ç¼©å¤§çº¦1MBçš„ä»£ç çš„æ—¶å€™ é‚£ä¹ˆçŽ°å®žä¸–ç•Œçš„ç½‘ç«™å¦‚ä½•å‘¢ï¼Œå¦‚CNN.comåœ¨é«˜ç«¯çš„iPhone 8ä¸Šï¼Œè§£æž/ç¼–è¯‘CNNçš„JSéœ€è¦èŠ±è´¹å¤§çº¦4ç§’ï¼Œè€Œæ™®é€šæ‰‹æœºï¼ˆMoto G4ï¼‰åˆ™åªéœ€è¦13ç§’ã€‚è¿™å¯ä»¥æ˜¾è‘—å½±å“ç”¨æˆ·ä¸Žæœ¬ç½‘ç«™å®Œå…¨äº¤äº’çš„é€Ÿåº¦ã€‚è‹¹æžœçš„A11ä»¿ç”ŸèŠ¯ç‰‡å’Œéžå¸¸æ™®é€šçš„Androidç¡¬ä»¶ä¸­çš„Snapdragon 617çš„è§£æžæ—¶é—´æ€§èƒ½æ¯”è¾ƒã€‚ è¿™çªå‡ºäº†æ™®é€šç¡¬ä»¶ï¼ˆå¦‚Moto G4ï¼‰æµ‹è¯•çš„é‡è¦æ€§ï¼Œè€Œä¸ä»…ä»…æ˜¯å£è¢‹é‡Œçš„æ‰‹æœºã€‚ä½†æ˜¯ï¼Œä½¿ç”¨çŽ¯å¢ƒå¾ˆé‡è¦ï¼šä¼˜åŒ–æ‚¨çš„ç”¨æˆ·æ‹¥æœ‰çš„è®¾å¤‡å’Œç½‘ç»œæ¡ä»¶ã€‚ åˆ†æžå¯ä»¥æ·±å…¥äº†è§£æ‚¨çš„çœŸå®žç”¨æˆ·è®¿é—®æ‚¨çš„ç½‘ç«™çš„ç§»åŠ¨è®¾å¤‡ç±»åˆ«ã€‚è¿™å¯ä»¥æä¾›æœºä¼šæ¥äº†è§£ä»–ä»¬æ­£åœ¨ä½¿ç”¨çš„çœŸæ­£çš„CPU / GPUçš„é™åˆ¶ã€‚ æˆ‘ä»¬æ˜¯å¦çœŸçš„å‘é€äº†å¤ªå¤šçš„JavaScriptï¼Ÿé”™è¯¯ï¼Œè¿™å¾ˆæœ‰å¯èƒ½:) ä½¿ç”¨HTTP Archiveï¼ˆæœ€é«˜å¤§çº¦50ä¸‡ä¸ªç«™ç‚¹ï¼‰æ¥åˆ†æžç§»åŠ¨è®¾å¤‡ä¸ŠJavaScriptçš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ50ï¼…çš„ç«™ç‚¹éœ€è¦14ç§’æ‰èƒ½èŽ·å¾—äº¤äº’ã€‚ä»…ä»…åªæ˜¯è§£æžå’Œç¼–è¯‘JSï¼Œè¿™äº›ç½‘ç«™å°±èŠ±è´¹é•¿è¾¾4ç§’ã€‚ åœ¨èŽ·å–å’Œå¤„ç†JSå’Œå…¶ä»–èµ„æºæ‰€èŠ±è´¹çš„æ—¶é—´ä¸­ï¼Œå› ä¸ºæ„Ÿè§‰ç½‘é¡µå·²ç»å¯ä»¥ä½¿ç”¨ï¼Œç”¨æˆ·å¯èƒ½ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿™ä¹Ÿè®¸å¹¶ä¸å¥‡æ€ªã€‚ä½†æˆ‘ä»¬ä¸€å®šå¯ä»¥åœ¨è¿™é‡Œåšå¾—æ›´å¥½ã€‚ ä»Žç½‘é¡µä¸­åˆ é™¤ä¸é‡è¦çš„JavaScriptå¯ä»¥å‡å°‘ä¼ è¾“æ—¶é—´ï¼ŒCPUå¯†é›†åž‹è§£æžå’Œç¼–è¯‘ä»¥åŠæ½œåœ¨çš„å†…å­˜å¼€é”€ã€‚è¿™ä¹Ÿæœ‰åŠ©äºŽè®©æ‚¨çš„ç½‘é¡µæ›´å¿«åœ°äº¤äº’ã€‚ æ‰§è¡Œæ—¶é—´è¿™ä¸ä»…ä»…æ˜¯è§£æžå’Œç¼–è¯‘ï¼Œè€Œä¸”å¯èƒ½ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚JavaScriptæ‰§è¡Œï¼ˆä¸€æ¬¡è§£æž/ç¼–è¯‘è¿è¡Œä»£ç ï¼‰æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸Šå‘ç”Ÿçš„æ“ä½œä¹‹ä¸€ã€‚å¾ˆé•¿çš„æ‰§è¡Œæ—¶é—´ä¹Ÿå¯ä»¥æŽ¨å‡ºç”¨æˆ·å¯ä»¥ä¸Žç½‘ç«™äº’åŠ¨çš„æ—¶é—´ã€‚ å¦‚æžœè„šæœ¬æ‰§è¡Œæ—¶é—´è¶…è¿‡50msï¼Œåˆ™äº¤äº’æ—¶é—´ä¼šè¢«ä¸‹è½½ï¼Œç¼–è¯‘å’Œæ‰§è¡ŒJSæ‰€èŠ±æ—¶é—´å»¶è¿Ÿäº† - Alex Russell ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScriptå—ç›ŠäºŽsmall chunksï¼Œä»¥é¿å…é”å®šä¸»çº¿ç¨‹ã€‚æŽ¢ç´¢æ˜¯å¦å¯ä»¥å‡å°‘æ‰§è¡Œè¿‡ç¨‹ä¸­æ­£åœ¨è¿›è¡Œçš„å·¥ä½œé‡ã€‚ å‡å°‘JavaScriptå‘é€å¼€é”€çš„æ¨¡å¼å½“ä½ è¯•å›¾ä¿æŒJavaScriptçš„è§£æž/ç¼–è¯‘å’Œç½‘ç»œä¼ è¾“æ—¶é—´å¾ˆæ…¢æ—¶ï¼Œæœ‰ä¸€äº›æ¨¡å¼å¯ä»¥å¸®åŠ©åƒåŸºäºŽè·¯ç”±çš„åˆ†å—(route-based chunking)æˆ–PRPLã€‚ PRPLæ˜¯ä¸€ç§é€šè¿‡ä»£ç åˆ†å‰²å’Œç¼“å­˜æ¥ä¼˜åŒ–äº¤äº’æ€§çš„æ¨¡å¼ï¼š è®©æˆ‘ä»¬çœ‹çœ‹å®ƒå¯ä»¥äº§ç”Ÿçš„å½±å“ã€‚æˆ‘ä»¬ä½¿ç”¨V8çš„è¿è¡Œæ—¶è°ƒç”¨ç»Ÿè®¡æ¥åˆ†æžæµè¡Œç§»åŠ¨ç½‘ç«™å’ŒProgressive Web Appsçš„åŠ è½½æ—¶é—´ã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè§£æžæ—¶é—´ï¼ˆä»¥æ©™è‰²æ˜¾ç¤ºï¼‰æ˜¯è®¸å¤šè¿™äº›ç«™ç‚¹èŠ±è´¹æ—¶é—´çš„æ¯”è¾ƒå¤§çš„éƒ¨åˆ†ï¼š Wegoæ˜¯ä¸€ä¸ªä½¿ç”¨PRPLçš„ç½‘ç«™ï¼Œå®ƒè®¾æ³•ä¿æŒè¾ƒä½Žçš„è·¯ç”±è§£æžæ—¶é—´ï¼Œèƒ½å¤Ÿéžå¸¸è¿…é€Ÿåœ°è¿›è¡Œäº’åŠ¨ã€‚ä¸Šé¢çš„è®¸å¤šå…¶ä»–ç«™ç‚¹éƒ½é‡‡ç”¨ä»£ç åˆ†è§£å’Œæ€§èƒ½é¢„ç®—æ¥é™ä½ŽJSçš„å¼€é”€ã€‚ å…¶ä»–å¼€é”€JavaScriptå¯ä»¥é€šè¿‡å…¶ä»–æ–¹å¼å½±å“é¡µé¢æ€§èƒ½ï¼š å†…å­˜ã€‚ç”±äºŽGCï¼ˆåžƒåœ¾æ”¶é›†ï¼‰ï¼Œé¡µé¢å¯èƒ½ç»å¸¸ä¼šå‡ºçŽ°å¡é¡¿æˆ–æš‚åœã€‚å½“æµè§ˆå™¨å›žæ”¶å†…å­˜æ—¶ï¼ŒJSæ‰§è¡Œè¢«æš‚åœï¼Œæ‰€ä»¥ç»å¸¸è¿›è¡Œåžƒåœ¾æ”¶é›†çš„æµè§ˆå™¨å¯ä»¥æ¯”æˆ‘ä»¬æƒ³è¦çš„æ›´é¢‘ç¹åœ°æš‚åœæ‰§è¡Œã€‚é¿å…å†…å­˜æ³„æ¼å’Œé¢‘ç¹çš„gcæš‚åœï¼Œä»¥ä¿æŒé¡µé¢æµç•…ã€‚ åœ¨è¿è¡Œæ—¶ï¼Œé•¿æ—¶é—´è¿è¡Œçš„JavaScriptå¯ä»¥é˜»æ­¢ä¸»çº¿ç¨‹å¯¼è‡´æ— å“åº”çš„é¡µé¢ã€‚å°†å·¥ä½œåˆ†æˆæ›´å°çš„éƒ¨åˆ†ï¼ˆä½¿ç”¨requestAnimationFrameï¼ˆï¼‰æˆ–æœ‰è®¡åˆ’çš„ä½¿ç”¨requestIdleCallbackï¼ˆï¼‰ï¼‰å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å“åº”æ€§é—®é¢˜ã€‚ æ¸è¿›å¼å¼•å¯¼è®¸å¤šç½‘ç«™å°†å†…å®¹å¯è§†æ€§ä½œä¸ºäº¤äº’æ€§çš„ä»£ä»·æ¥ä¼˜åŒ–ã€‚ä¸ºäº†åœ¨æœ‰å¤§çš„JavaScriptåŒ…æ—¶èŽ·å¾—ä¸€ä¸ªå¿«é€Ÿçš„é¦–é¡µï¼Œå¼€å‘è€…æœ‰æ—¶ä¼šä½¿ç”¨æœåŠ¡å™¨ç«¯æ¸²æŸ“;ç„¶åŽåœ¨JavaScriptæœ€ç»ˆèŽ·å–æ—¶å°†å…¶â€œå‡çº§â€ä»¥é™„åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚ å°å¿ƒ - è¿™æœ‰å®ƒè‡ªå·±çš„å¼€é”€ã€‚1ï¼‰è¿™é€šå¸¸ä¼šå‘é€ä¸€ä¸ªæ›´å¤§çš„ HTMLå“åº”ï¼Œè¿™ä¼šå»¶è¿Ÿäº¤äº’æ€§ï¼Œ2ï¼‰è¿™ä¼šæŠŠç”¨æˆ·ç•™åœ¨ä¸€ä¸ªç¦»å¥‡çš„å±±è°·ä¸­ï¼Œå…¶ä¸­æœ‰ä¸€åŠçš„å®žé™…åŠŸèƒ½æ˜¯æ²¡æœ‰åŠžæ³•äº¤äº’çš„ï¼Œç›´åˆ°JavaScriptè¿è¡Œå®Œæˆã€‚ æ¸è¿›å¼å¼•å¯¼å¯èƒ½æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ–¹æ³•ã€‚å‘é€ä¸€ä¸ªæœ€å°åŠŸèƒ½çš„é¡µé¢ï¼ˆç”±å½“å‰è·¯ç”±æ‰€éœ€çš„HTML / JS / CSSç»„æˆï¼‰ã€‚éšç€æ›´å¤šçš„èµ„æºåˆ°è¾¾ï¼Œè¯¥åº”ç”¨ç¨‹åºå¯ä»¥å»¶è¿ŸåŠ è½½å’Œè§£é”æ›´å¤šçš„åŠŸèƒ½ã€‚Paul Lewisçš„æ¸è¿›å¼å¼•å¯¼è§†è§‰ æ ¹æ®æ‰€çœ‹åˆ°çš„åŠ è½½ä»£ç æ˜¯åœ£æ¯ã€‚PRPLå’Œæ¸è¿›å¼•å¯¼æ˜¯å¯ä»¥å¸®åŠ©å®žçŽ°è¿™ä¸€ç‚¹çš„æ¨¡å¼ã€‚ ç»“è®ºä¼ è¾“å¤§å°å¯¹ä½Žç«¯ç½‘ç»œè‡³å…³é‡è¦ã€‚è§£æžæ—¶é—´å¯¹äºŽCPUå—é™çš„è®¾å¤‡å¾ˆé‡è¦ã€‚ä¿æŒè¿™ä¸¤è€…çš„æŠµå¼€é”€ã€‚ å›¢é˜Ÿå‘çŽ°æˆåŠŸé‡‡ç”¨ä¸¥æ ¼çš„æ€§èƒ½é¢„ç®—æ¥ä¿æŒJavaScriptä¼ è¾“å’Œè§£æž/ç¼–è¯‘æ—¶é—´è¾ƒçŸ­ã€‚è¯·å‚é˜…Alex Russellçš„â€œ æ‚¨å¯ä»¥æ‰¿å—å—ï¼Ÿï¼šçœŸå®žä¸–ç•Œçš„Webæ€§èƒ½é¢„ç®— â€ï¼Œä»¥èŽ·å–å…³äºŽç§»åŠ¨é¢„ç®—çš„æŒ‡å¯¼ã€‚è€ƒè™‘ä¸€ä¸‹æˆ‘ä»¬åˆ¶ä½œçš„æž¶æž„å†³ç­–å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºé€»è¾‘ç•™ä¸‹å¤šå°‘JSâ€œç©ºé—´â€ã€‚ å¦‚æžœæ‚¨æ­£åœ¨æž„å»ºé’ˆå¯¹ç§»åŠ¨è®¾å¤‡çš„ç½‘ç«™ï¼Œè¯·å°½å¯èƒ½åœ¨ä»£è¡¨æ€§ç¡¬ä»¶ä¸Šå¼€å‘ï¼Œä¿æŒè¾ƒä½Žçš„JavaScriptåˆ†æž/ç¼–è¯‘æ—¶é—´ï¼Œå¹¶é‡‡ç”¨æ€§èƒ½é¢„ç®—æ¥ç¡®ä¿æ‚¨çš„å›¢é˜Ÿèƒ½å¤Ÿå…³æ³¨å…¶JavaScriptæˆæœ¬ã€‚ æ³¨ï¼š æœ¬æ–‡ç‰ˆæƒå½’åŽŸä½œè€…æ‰€æœ‰ï¼Œä»…ç”¨äºŽå­¦ä¹ ä¸Žäº¤æµï¼› å¦‚éœ€è½¬è½½è¯‘æ–‡ï¼Œçƒ¦è¯·æŒ‰ä¸‹æ–¹æ³¨æ˜Žå‡ºå¤„ä¿¡æ¯ï¼Œè°¢è°¢ï¼åŽŸæ–‡ï¼š The Cost Of JavaScriptä½œè€…ï¼š Addy Osmaniè¯‘è€…ï¼šsmallboneåŽŸæ–‡åœ°å€]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>æ€§èƒ½</tag>
        <tag>ç¿»è¯‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[äº†ä¸èµ·çš„NodeJSï¼šMongoDBä»£ç æ›´æ­£]]></title>
    <url>%2F2017%2F10%2F01%2Fsmashingnode-master-code%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å­¦ä¹ NodeJSï¼Œåœ¨ç½‘ä¸Šä¸€ç•ªæœç´¢èµ„æ–™åŽï¼Œå¾ˆå¤šäººéƒ½å»ºè®®è¯»ã€Šäº†ä¸èµ·çš„NodeJSã€‹ï¼ŒäºŽæ˜¯å°±å¼€å§‹å¼€å§‹å•ƒèµ·æ¥äº†ã€‚åœ¨ä¸€è¾¹è¯»ä¸€è¾¹æ•²ä»£ç çš„çš„è¿‡ç¨‹ä¸­å‘çŽ°ä¹¦ä¸­æœ‰äº›ç¤ºä¾‹ä¸­çš„ä»£ç å­˜åœ¨ä¹¦å†™æˆ–è€…æ¡†æž¶çš„æ›´æ–°å¯¼è‡´è¿è¡Œå‡ºé”™ï¼ŒèŠ±äº†ä¸å°‘æ—¶é—´å­¦ä¹ æ¡†æž¶çš„æ›´æ–°å’Œåº“çš„ä½¿ç”¨æ–¹æ³•ï¼Œæ‰è®©ä»£ç è¿è¡Œæ­£å¸¸ã€‚ä¸‹é¢å°±æ˜¯æœ‰å…³MongoDBä»£ç æ›´æ­£ï¼š expresså®žä¾‹åˆ›å»ºä¹¦ä¸Šçš„å†™æ³•1var app = express.createServer(); æ›´æ–°åŽçš„å†™æ³•1var app = express(); ä¸­é—´ä»¶ä¹¦ä¸Šçš„å†™æ³•1234//æºä»£ç app.use(express.bodyParser());app.use(express.cookieParser());app.use(express.session(&#123;secret: &apos;my secret&apos;&#125;)); ç”±äºŽæ–°ç‰ˆçš„expressä¸­å°†åŽŸæ¥è‡ªèº«çš„å¤§éƒ¨åˆ†ä¸­é—´ä»¶éƒ½ç§»é™¤äº†ï¼Œæ‰€ä»¥éœ€è¦é¢å¤–å®‰è£…å¹¶å¼•ç”¨ã€‚123456789//æ›´æ­£åŽvar session = require(&apos;express-session&apos;);var cookieParser = require(&apos;cookie-parser&apos;);var bodyParser = require(&apos;body-parser&apos;);app.use(bodyParser.json());app.use(bodyParser.urlencoded(&#123; extended: true &#125;));app.use(cookieParser());app.use(session(&#123;secret: &apos;my secret&apos;&#125;)); bodyParser.urlencodedä¸­çš„extentedè®¾ç½®é€‰é¡¹æ˜¯ç”¨æ¥æŽ§åˆ¶POSTä¼ é€’çš„å€¼æ˜¯æ”¾èƒ½è¢«å¯¹è±¡åŒ–ï¼Œä¾‹å¦‚ä¸‹é¢çš„jadeæ¨¡æ¿ä¸­inputä¿¡æ¯1input(name=&quot;user[first]&quot;, type=&quot;text&quot;) { extended: true }: req.body ä¸º { user: { name: â€˜123123â€™ } }{ extended: false }: req.body ä¸º { â€˜user[name]â€™: â€˜12313â€™ } Jadeæ¨¡æ¿Jadeæ¨¡æ¿å·²ç»æ›´åä¸ºPugï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥ä½¿ç”¨jadeã€‚ doctypeçš„å˜æ›´ï¼š doctype 5 =&gt; doctype html ä¹¦ä¸­indexæ¨¡æ¿ä¸­çš„block bodyä¸‹çš„ä»£ç åº”è¯¥ç¼©è¿›1234567891011//æ›´æ­£åŽextends layoutblock content if (authenticated) p Welcome back, #&#123;me.first&#125; a(href=&quot;/logout&quot;) Logout else p Welcome new visitor! ul li: a(href=&quot;/login&quot;) Login li: a(href=&quot;/signup&quot;) Signup mongodbæ–°å»ºcollection12//æºä»£ç app.users = new mongodb.Collection(client, &apos;users&apos;); è¿™é‡Œ Collection æ˜¯ mongodb çš„æ–¹æ³•å¾—ç”¨å°å†™,å¦å¤–åœ¨ä½¿ç”¨ mongodb ä¹‹å‰è®°å¾—è¦å…ˆç”¨ mongod å‘½ä»¤å¼€å¯æœåŠ¡å™¨12//æ›´æ­£åŽapp.users = new mongodb.collection(client, &apos;users&apos;); mongodb insert åŽçš„å›žè°ƒä½¿ç”¨123456//æºä»£ç app.users.insert(req.body.user, function (err, doc) &#123;if (err) next(err);console.log(doc);res.redirect(&apos;/login/&apos; + doc[0].email);&#125;); doc å˜æˆäº†ä¸€ä¸ªå¯¹è±¡ï¼Œæ‹¥æœ‰ result å’Œ ops ä¸¤ä¸ªå±žæ€§,æˆ‘ä»¬éœ€è¦çš„æ•°æ®åœ¨ ops é‡Œé¢12345app.users.insert(req.body.user, function (err, doc) &#123;if (err) next(err);console.log(doc);res.redirect(&apos;/login/&apos; + doc.ops[0].email);&#125;); 204é¡µå¿˜è®°ä¼  next äº†â€¦12345678//æºä»£ç app.post(&apos;/login&apos;, function (req, res) &#123;app.users.findOne(&#123;email: req.body.email, password: req.body.password&#125;, function (err, doc) &#123;if (err) return next(err);if (!doc) return res.send(&apos;&lt;p&gt;User not found &lt;/p&gt;&apos;);req.session.loggedIn = doc._id.toString();&#125;);&#125;); 12345678//æ›´æ­£åŽapp.post(&apos;/login&apos;, function (req, res, next) &#123;app.users.findOne(&#123;email: req.body.email, password: req.body.password&#125;, function (err, doc) &#123;if (err) return next(err);if (!doc) return res.send(&apos;&lt;p&gt;User not found &lt;/p&gt;&apos;);req.session.loggedIn = doc._id.toString();&#125;);&#125;); mongodbçš„_idæŸ¥è¯¢ä½¿ç”¨ mongodb çš„ _id è¿›è¡ŒæŸ¥è¯¢,åŽŸæ–‡ä¸­çš„æŒ‡ä»£æ–¹æ³•å·²ç»ä¸èƒ½ä½¿ç”¨äº†ã€‚è€Œ node æœ¬èº«ä¸æä¾›ç”Ÿæˆ objectid çš„æ–¹æ³•è¿™é‡Œéœ€è¦ä¾èµ–ç¬¬ä¸‰æ–¹å·¥å…·12345//æºä»£ç app.users.findOne(&#123;_id: &#123;$oid: req.session.loggedIn&#125;&#125;, function (err, doc) &#123;if (err) return next(err);next();&#125;); 1234567//æ›´æ­£åŽvar objectid = require(&apos;objectid&apos;);app.users.findOne(&#123;_id: objectid(req.session.loggedIn)&#125;, function (err, doc) &#123;if (err) return next(err);next();&#125;); jadeä¸­å…¨å±€å˜é‡ locals çš„ä½¿ç”¨1234567891011121314//æºä»£ç app.use(function (req, res, next) &#123;if (req.session.loggedIn) &#123;res.local(&apos;auth&apos;, true);app.users.findOne(&#123;_id: objectid(req.session.loggedIn)&#125;, function (err, doc) &#123;if (err) return next(err);res.local(&apos;me&apos;, doc);next();&#125;);&#125; else &#123;res.local(&apos;auth&apos;, false);next();&#125;&#125;); è¿™é‡Œ express çš„å®šä¹‰æ–¹æ³•æ›´æ”¹äº†,å¦å¤–ä½¿ç”¨ mongodb æŸ¥è¯¢çš„æ—¶å€™å¦‚æžœæ²¡æœ‰æŸ¥æ‰¾åˆ°å¹¶ä¸ä¼šæŠ¥é”™,è€Œæ˜¯åœ¨å›žè°ƒçš„ doc è®¾ä¸º nullã€‚ 1234567891011121314//æ›´æ­£åŽapp.use(function (req, res, next) &#123;if (req.session.loggedIn) &#123;app.locals.auth = true;app.users.findOne(&#123;_id: objectid(req.session.loggedIn)&#125;, function (err, doc) &#123;if (err) return next(err);if (doc) app.locals.me = doc;next();&#125;);&#125; else &#123;app.locals.auth = false;next();&#125;&#125;);]]></content>
      <tags>
        <tag>Node</tag>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScriptä¸­çš„Setsç®€ä»‹]]></title>
    <url>%2F2017%2F07%2F16%2FSets-in-JavaScript%2F</url>
    <content type="text"><![CDATA[Sets æ˜¯ES6(ES2015)ä¸­ä¸€ä¸ªæ–°çš„å¯¹è±¡ç±»åž‹ï¼Œç”¨æ¥åˆ›å»ºä¸€ç³»åˆ—å”¯ä¸€å€¼çš„é›†åˆ.é›†åˆä¸­çš„å€¼å¯ä»¥æ˜¯ç®€å•çš„åŽŸå§‹ç±»åž‹å¦‚å­—ç¬¦ä¸²(strings)æˆ–æ•´æ•°(integers)ï¼Œä¹Ÿå¯ä»¥æ˜¯æ›´å¤æ‚çš„å¯¹è±¡ç±»åž‹å¦‚å¯¹è±¡å­—é¢é‡æˆ–è€…æ•°ç»„ åŸºæœ¬æ–¹æ³•ä¸‹é¢æ˜¯åŸºæœ¬çš„setåŠå…¶æ–¹æ³•(add, size, has, forEach, delete, clear)çš„ç®€å•ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425let animals = new Set();animals.add('ðŸ·');animals.add('ðŸ¼');animals.add('ðŸ¢');animals.add('ðŸ¿');console.log(animals.size); // 4animals.add('ðŸ¼');console.log(animals.size); // 4console.log(animals.has('ðŸ·')); // trueanimals.delete('ðŸ·');console.log(animals.has('ðŸ·')); // falseanimals.forEach(animal =&gt; &#123; console.log(`Hey $&#123;animal&#125;!`);&#125;);// Hey ðŸ¼!// Hey ðŸ¢!// Hey ðŸ¿!animals.clear();console.log(animals.size); // 0 åˆå§‹åŒ–ä¸‹é¢æ˜¯å¦ä¸€ä¸ªå°†æ•°ç»„ä½œä¸ºåˆå§‹å€¼ä¼ è¿›setçš„ç¤ºä¾‹ã€‚éœ€è¦ä¸»è¦çš„æ˜¯åˆå§‹åŒ–çš„æ•°ç»„æ˜¯å¦‚ä½•è¢«è§£æž„çš„ï¼Œä½†æ˜¯éšåŽæ·»åŠ çš„æ•°ç»„å°†ä»¥æ•°ç»„çš„å½¢å¼å­˜åœ¨ï¼š 123456789101112131415let myAnimals = new Set(['ðŸ·', 'ðŸ¢', 'ðŸ·', 'ðŸ·']);myAnimals.add(['ðŸ¨', 'ðŸ‘']);myAnimals.add(&#123; name: 'Rud', type: 'ðŸ¢' &#125;);console.log(myAnimals.size); // 4myAnimals.forEach(animal =&gt; &#123; console.log(animal);&#125;);// ðŸ·// ðŸ¢// ["ðŸ¨", "ðŸ‘"]// Object &#123; name: "Rud", type: "ðŸ¢" &#125; å­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è¿­ä»£ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¢«ä¼ å…¥æ¥åˆå§‹åŒ–ä¸€ä¸ªsetï¼š 1234console.log('Only unique characters will be in this set.'.length); // 43let sentence = new Set('Only unique characters will be in this set.');console.log(sentence.size); // 18 Forâ€¦oféåŽ†é™¤äº†åœ¨ä¸€ä¸ªsetä¸Šå¯ä»¥ä½¿ç”¨forEachå¤–ï¼Œforâ€¦ofå¾ªçŽ¯ä¹Ÿå¯ä»¥è¢«ç”¨æ¥éåŽ†setsï¼š 12345678910let moreAnimals = new Set(['ðŸº', 'ðŸ´', 'ðŸ•', 'ðŸ‡']);for (let animal of moreAnimals) &#123; console.log(`Howdy $&#123; animal &#125;`);&#125;// Howdy ðŸº// Howdy ðŸ´// Howdy ðŸ•// Howdy ðŸ‡ Keys å’Œ ValuesSetsä¹Ÿæœ‰keyså’Œvaluesæ–¹æ³•ï¼Œç”±äºŽkeysæ˜¯valuesçš„åˆ«åï¼Œæ‰€ä»¥ä¸¤ä¸ªæ–¹æ³•å…¶å®žæ˜¯å®Œæˆä¸€æ ·çš„äº‹æƒ…ã€‚ä½¿ç”¨ä¸¤è€…ä¸­çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•éƒ½ä¼šè¿”å›žä¸€ä¸ªæ–°çš„å¯è¿­ä»£çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„å€¼ä¸Žæ·»åŠ åˆ°é›†åˆä¸­çš„é¡ºåºç›¸åŒã€‚ 123456789101112131415161718192021222324let partyItems = new Set(['ðŸ•', 'ðŸ¾', 'ðŸŽŠ']);let items = partyItems.values();console.log(items.next());console.log(items.next());console.log(items.next());console.log(items.next().done);// Object &#123;// done: false,// value: "ðŸ•"// &#125;// Object &#123;// done: false,// value: "ðŸ¾"// &#125;// Object &#123;// done: false,// value: "ðŸŽŠ"// &#125;// true æ³¨ï¼š æœ¬æ–‡ç‰ˆæƒå½’åŽŸä½œè€…æ‰€æœ‰ï¼Œä»…ç”¨äºŽå­¦ä¹ ä¸Žäº¤æµï¼› å¦‚éœ€è½¬è½½è¯‘æ–‡ï¼Œçƒ¦è¯·æŒ‰ä¸‹æ–¹æ³¨æ˜Žå‡ºå¤„ä¿¡æ¯ï¼Œè°¢è°¢ï¼åŽŸæ–‡ï¼š Introduction to Sets in JavaScriptä½œè€…ï¼š alligatorioè¯‘è€…ï¼šsmallboneè¯‘æ–‡åœ°å€ï¼šhttps://alligator.io//js/sets-introduction/]]></content>
      <tags>
        <tag>JavaScript</tag>
        <tag>ES6</tag>
        <tag>Sets</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Flex Basisä¸ŽWidthçš„åŒºåˆ«]]></title>
    <url>%2F2017%2F07%2F08%2FWidth-FlexBasis%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨å­¦ä¹ Flex Boxï¼Œå…¶ä¸­çš„Flex Boxå±žæ€§ä¸­çš„Flex Basisæ˜¯å…³äºŽé¡¹ç›®å®½åº¦å±žæ€§è®¾ç½®çš„ï¼Œè¿™è®©è®¸å¤šåˆå­¦Flex Boxçš„äººå›°æƒ‘å®ƒä¸ŽCSSç›’å­æ¨¡åž‹Widthå±žæ€§çš„åŒºåˆ«åœ¨å“ªï¼ŸGoogleäº†ä¸€ç•ªï¼Œæ‰¾åˆ°ä¸€ç¯‡è§£é‡Šå†™å¾—å¾ˆæ˜¯ä¸é”™çš„æ–‡ç« ï¼Œå°è¯•ç€ç¿»è¯‘åˆ†äº«ä¸€ä¸‹ã€‚åŽŸæ–‡åœ°å€ï¼šhttp://gedd.ski/post/the-difference-between-width-and-flex-basis/ Flex Itemsçš„åº”ç”¨å‡†åˆ™content â€“&gt; width â€“&gt; flex-basis (limted by max|min-width)ä¹Ÿå°±æ˜¯è¯´ï¼Œ å¦‚æžœæ²¡æœ‰è®¾ç½®flex-basiså±žæ€§ï¼Œé‚£ä¹ˆflex-basisçš„å¤§å°å°±æ˜¯é¡¹ç›®çš„widthå±žæ€§çš„å¤§å° å¦‚æžœæ²¡æœ‰è®¾ç½®widthå±žæ€§ï¼Œé‚£ä¹ˆflex-basisçš„å¤§å°å°±æ˜¯é¡¹ç›®å†…å®¹(content)çš„å¤§å° ä¸‹é¢é€šè¿‡ç»™ä¸€ä¸ª1000pxçš„flexå®¹å™¨æ¥æ·»åŠ ä¸€äº›flex itemsæ¥è¯´æ˜Žä¸€ä¸‹Flex Itemsçš„åº”ç”¨å‡†åˆ™ï¼š1234container &#123; display: flex; width: 1000px;&#125; è®¾ç½®å®½åº¦(Width)æ·»åŠ å››ä¸ª200x200åƒç´ çš„itemsåˆ°flexå®¹å™¨ä¸­1234item &#123; width: 200px; height: 200px;&#125; å› ä¸ºflexå®¹å™¨æœ‰è¶³å¤Ÿå¤šçš„ç©ºé—´ï¼Œæ‰€ä»¥itemså¯ä»¥å¾ˆå¥½çš„å¡«å……åœ¨å®¹å™¨å†…éƒ¨ï¼šä¸Šé¢çš„ç¤ºä¾‹å°±æ˜¯å½“flex-basisæ²¡æœ‰è¢«æŒ‡å®šï¼Œé»˜è®¤å€¼æ˜¯flex-basis: autoï¼Œä¹Ÿå°±æ„å‘³ç€itemsä»¥å®½åº¦width(200px)ä¸ºå‡†ã€‚ è®¾ç½®ä¸€ä¸ªFlex Basiså€¼è®©æˆ‘ä»¬çœ‹çœ‹å½“ç»™è¿™äº›å·²ç»è®¾ç½®å›ºå®šå®½åº¦widthçš„itemsè®¾ç½®ä¸€ä¸ªflex-basiså€¼ä¼šå‘ç”Ÿä»€ä¹ˆã€‚1234item &#123; width: 30px; flex-basis: 250px;&#125; å°±åƒä½ è¯´çœ‹åˆ°çš„ï¼Œå½“æŒ‡å®šä¸€ä¸ªflex-basiså€¼çš„æ—¶å€™ï¼Œç›’å­çš„å®½åº¦å±žæ€§è¢«å¿½ç•¥äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä¸éœ€è¦æŒ‡å®šç›’å­çš„å®½åº¦widthå±žæ€§äº†123item &#123; flex-basis: 250px;&#125; itemså®Œå…¨å¡«å……äº†flexå®¹å™¨ï¼šå› æ­¤itemsçš„å®½åº¦å…³é”®åœ¨ç”¨æœ€ç»ˆçš„flex-basisã€‚æœ€ä½³çš„æ–¹æ³•æ˜¯åªä½¿ç”¨flex-basisè€Œä¸æ˜¯widthæˆ–heightå±žæ€§ã€‚ç‰¹åˆ«æ˜¯Safari 10ä¹‹å‰çš„ç‰ˆæœ¬çš„æµè§ˆå™¨æœ‰ä¸€ä¸ªflexbox bugï¼Œåœ¨ç»™itemsåº”ç”¨flex-shrinkå±žæ€§çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨heightå±žæ€§è€Œä¸æ˜¯flex-basisã€‚ ä½¿ç”¨max-widthæ¥é™åˆ¶flex-basismin-widthå’Œmax-widthä¼šé™åˆ¶flex-basiså€¼ã€‚ä¸‹é¢æ˜¯ç»™flex itemsè®¾ç½®max-widthçš„ç»“æžœï¼š1234item &#123; flex-basis: 250px; max-width: 100px;&#125; å¯ä»¥çœ‹åˆ°å³ä½¿æˆ‘ä»¬å°†flex-basisè®¾ç½®ä¸º250pxï¼Œitemçš„å®½åº¦è¿˜æ˜¯è¢«é™åˆ¶åœ¨äº†100pxã€‚æ‰€ä»¥åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æœ€ç»ˆçš„flex-basisæ˜¯100pxï¼šæŽ¥ç€è¯•è¯•min-widthæ¥çœ‹çœ‹æœ€ç»ˆçš„flex-basisæœ‰ä»€ä¹ˆä¸åŒï¼š1234item &#123; flex-basis: 100px; min-width: 250px;&#125; å¯ä»¥çœ‹åˆ°æœ€ç»ˆitemçš„å®½åº¦æ˜¯250pxè€Œä¸æ˜¯100pxï¼š Flex-basisåˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸçŽ°åœ¨æˆ‘ä»¬çŸ¥é“äº†widthå±žæ€§åªæ˜¯ä¸€ä¸ªå½“flex-basisæ²¡æœ‰è¢«è®¾ç½®æ—¶çš„å›žé€€é€‰é¡¹ã€‚min-widthå’Œmax-widthåˆ™æ˜¯flex-basisçš„ä¸‹é™å’Œä¸Šé™ã€‚é‚£ä¹ˆflex-basisåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ä¹Ÿè®¸ä½ æ³¨æ„åˆ°äº†ä¸Šé¢æˆ‘ä»¬æ‰€æœ‰çš„ç¤ºä¾‹åœ¨å°†flex itemsæ”¾å…¥flexå®¹å™¨ä¹‹å‰éƒ½ç›´è§‚åœ°åˆ—å‡ºäº†flex itemsçš„å¤§å°ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆåšæ˜¯å› ä¸ºè¿™å°±æ˜¯flex-basisçš„å«ä¹‰ï¼šflex items åœ¨è¢«æ”¾è¿›ä¸€ä¸ªflexå®¹å™¨ä¹‹å‰çš„å¤§å°ã€‚ä¹Ÿå°±æ˜¯itemsç†æƒ³æˆ–å‡è®¾çš„å¤§å°ã€‚ä½†æ˜¯flex-basisä¸èƒ½ä¿è¯å…¶å¤§å°ï¼ä¸€æ—¦å°†itemsæ”¾å…¥flexå®¹å™¨ä¸­ï¼Œflex-basisçš„å€¼å°±æ— æ³•ä¿è¯äº†ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°flex itemså®Œç¾Žåœ°å¡«å……äº†å®¹å™¨ï¼Œé‚£æ˜¯å› ä¸ºå®¹å™¨çš„å¤§å°æ­£å¥½ç­‰äºŽitemsæœ€ç»ˆçš„flex-basisä¹‹å’Œã€‚ä½†æ˜¯å¦‚æžœå®¹å™¨æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥å®¹çº³æˆ–è€…æœ‰å¤šä½™çš„ç©ºé—´å‘¢ï¼Ÿä¸‹é¢å°±åˆ†åˆ«è®²è§£ä¸€ä¸‹è¿™ä¸¤ç§æƒ…å†µï¼š å½“æ²¡æœ‰è¶³å¤Ÿç©ºé—´çš„æ—¶å€™æ¯”æ–¹è¯´æˆ‘ä»¬æƒ³è¦æ”¾æ›´å¤šçš„flex-basisï¼š200pxçš„itemsåˆ°æˆ‘ä»¬çš„å®¹å™¨ï¼šåœ¨itemsè¢«æ”¾è¿›å®¹å™¨ä¹‹å‰ï¼Œæ¯ä¸ªitemä¼šå æ®200pxï¼Œæ‰€æœ‰çš„itemsä¼šå æ®1600pxã€‚ä½†æ˜¯å®¹å™¨åªæœ‰1000pxã€‚å½“å®¹å™¨æ²¡æœ‰è¶³å¤Ÿå¤§çš„ç©ºé—´æ¥å­˜æ”¾æ‰€æœ‰çš„itemsçš„æ—¶å€™ï¼Œflex itemsä¼šæŒ‰ç…§åŽ‹ç¼©çŽ‡(shrink rate)è¢«åŽ‹ç¼©(shrink)å…¶å¤§å°æ¥å¡«å……å®¹å™¨,è¿™ä¸ªåŽ‹ç¼©çŽ‡å°±æ˜¯flex-shrinkæ¥è®¾ç½®çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªitemçš„åŽ‹ç¼©çŽ‡éƒ½æ˜¯ä¸€æ ·çš„ï¼š å½“æœ‰é¢å¤–çš„ç©ºé—´çš„æ—¶å€™é€šå¸¸æˆ‘ä»¬ä¼šæœ‰é¢å¤–çš„ç©ºé—´å‰©ä½™å½“æ‰€æœ‰çš„itemséƒ½æ·»åŠ è¿›å®¹å™¨åŽï¼š123item &#123; flex-basis: 100px;&#125; æˆ‘ä»¬å¯ä»¥æŽ§åˆ¶flex itemsçš„å¢žé•¿æ¥å¡«å……å¯ç”¨çš„ç©ºé—´ï¼Œè¿™ä¹Ÿå°±æ˜¯flex-growå±žæ€§çš„ä½œç”¨ã€‚é»˜è®¤å€¼ä¸º0ï¼Œæ„å‘³ç€itemä¸ä¼šå¢žé•¿ã€‚å¦‚æžœå°†æ¯ä¸ªitemè®¾ç½®flex-growï¼š 1ï¼Œé‚£ä¹ˆæ‰€æœ‰ çš„iteméƒ½ä¼šç­‰æ¯”ä¾‹çš„å¢žé•¿æ¥å¡«å……å‰©ä½™çš„ç©ºé—´ï¼š1234item &#123; flex-basis: 100px; flex-grow: 1;&#125; å¢žé•¿å’ŒåŽ‹ç¼©æ˜¯flexboxä¸­å¾ˆé‡è¦çš„ç‰¹æ€§ï¼Œä¹Ÿè®©flexboxéžå¸¸é€‚åˆåº”ç”¨äºŽå“åº”å¼UIè®¾è®¡ã€‚Flexbox Zombiesè¯¾ç¨‹æ¶µç›–äº†flex-shrinkå’Œflex-growæ›´å¤šè¯¦ç»†çš„ç»†èŠ‚ã€‚ Width vs flex-basiså¸Œæœ›çŽ°åœ¨ä½ æ˜Žç™½äº†widthå’Œflex-basisä¹‹é—´çš„åŒºåˆ«ï¼Œä¹ŸçŸ¥é“äº†å¦‚ä½•ä½¿ç”¨min-widthå’Œmax-widthæ¥é™åˆ¶æœ€ç»ˆçš„flex-basisã€‚ä»¥ä¸Šè¿™äº›è®¾ç½®åŒæ ·é€‚ç”¨äºŽheightå±žæ€§ï¼Œå½“ä½ å°†flex-directionè®¾ç½®ä¸ºcolumnæˆ–è€…column-reverseçš„æ—¶å€™ã€‚å¦‚æžœä½ æƒ³æŽŒæ¡æ‰€æœ‰çš„flexboxå±žæ€§ï¼Œå¢™è£‚æŽ¨èå…è´¹çš„Flexbox Zombiesè¯¾ç¨‹ï¼Œé€šè¿‡çŽ©æ¸¸æˆæ¥å­¦ä¹ flexboxï¼]]></content>
      <tags>
        <tag>ç¿»è¯‘</tag>
        <tag>CSS</tag>
        <tag>FlexBox</tag>
        <tag>å‰ç«¯å¼€å‘</tag>
      </tags>
  </entry>
</search>